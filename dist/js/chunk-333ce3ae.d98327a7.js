(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-333ce3ae"],{"0236":function(e,t,a){"use strict";a("47f6")},"0687":function(e,t,a){},"10ac":function(e,t,a){"use strict";a("9d37")},"16a4":function(e,t,a){"use strict";var i=a("dde5"),s=a("0be0");t["a"]={create(e){return i["a"].post("/categories",e)},update(e){let t=s["a"].deleteUnusedProps(s["a"].cloneObject(e));return i["a"].patch("/categories/"+e.id,t)},getById(e){return i["a"].get("/categories/id/"+e)},deleteById(e){return i["a"].delete("/categories/"+e)},getAll(){return i["a"].get("/categories/")},toggleStatus(e){return i["a"].patch("/categories/toggleStatus/"+e)}}},"176b":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("iq-card",{scopedSlots:e._u([{key:"body",fn:function(){return[t("tab-nav",{staticClass:"nav-fill mb-3",attrs:{tabs:"",id:"pills-tab-1"},on:{change:function(t){return e.onClick(t)}}},[t("tab-nav-items",{attrs:{active:!0,id:"pills-clinics-tab-fill",href:"#pills-clinics-fill",ariaControls:"pills-clinics-fill",role:"tab",ariaSelected:!0,title:e.$t("settings.unitTab.name")}}),t("tab-nav-items",{attrs:{active:!1,id:"pills-services-tab-fill",href:"#pills-services-fill",ariaControls:"pills-services-fill",role:"tab",ariaSelected:!1,title:e.$t("settings.servicesTab.name")}}),t("tab-nav-items",{attrs:{active:!1,id:"pills-categories-tab-fill",href:"#pills-categories-fill",ariaControls:"pills-categories-fill",role:"tab",ariaSelected:!1,title:"Categories"}}),t("tab-nav-items",{attrs:{active:!1,id:"pills-staffs-tab-fill",href:"#pills-staffs-fill",ariaControls:"pills-staffs-fill",role:"tab",ariaSelected:!1,title:"Staffs"}}),t("tab-nav-items",{attrs:{active:!1,id:"pills-communication-tab-fill",href:"#pills-communication-fill",ariaControls:"pills-communication-fill",role:"tab",ariaSelected:!1,title:"Communication"}})],1),t("tab-content",{staticClass:"mt-0",attrs:{id:"pills-tabContent-1"}},[t("tab-content-item",{attrs:{active:!0,id:"pills-clinics-fill","aria-labelled-by":"pills-clinics-tab-fill"}},[t("Units",{attrs:{active:e.activePage}})],1),t("tab-content-item",{attrs:{active:!1,id:"pills-services-fill","aria-labelled-by":"pills-services-tab-fill"}},[t("Services",{attrs:{active:e.activePage}})],1),t("tab-content-item",{attrs:{active:!1,id:"pills-categories-fill","aria-labelled-by":"pills-categories-tab-fill"}},[t("Categories",{attrs:{active:e.activePage}})],1),t("tab-content-item",{attrs:{active:!1,id:"pills-staffs-fill","aria-labelled-by":"pills-staffs-tab-fill"}},[t("Staffs",{attrs:{active:e.activePage}})],1),t("tab-content-item",{attrs:{active:!1,id:"pills-communication-fill","aria-labelled-by":"pills-communication-tab-fill"}},[t("Communication",{attrs:{active:e.activePage}})],1)],1)]},proxy:!0}])})},s=[],r=function(){var e=this,t=e._self._c;return t("b-container",{attrs:{fluid:""}},[t("h5",{staticClass:"mb-3"},[e._v("Basic Information")]),t("div",{staticClass:"new-clinic-info"},[t("b-row",[t("b-form-group",{staticClass:"col-md-6",attrs:{label:"Unit name:","label-for":"name"}},[t("ValidationProvider",{attrs:{name:"Unit name",rules:"required"},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("b-form-input",{class:a.length>0?" is-invalid":"",attrs:{type:"text",placeholder:"Unit Name"},model:{value:e.unit.name,callback:function(t){e.$set(e.unit,"name",t)},expression:"unit.name"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(a[0]))])])]}}])})],1),t("b-form-group",{staticClass:"col-md-6",attrs:{label:"Alias:","label-for":"alias"}},[t("ValidationProvider",{attrs:{name:"Unit Alias",rules:"required"},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("b-form-input",{class:a.length>0?" is-invalid":"",attrs:{type:"text",placeholder:"Unit Alias"},model:{value:e.unit.alias,callback:function(t){e.$set(e.unit,"alias",t)},expression:"unit.alias"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(a[0]))])])]}}])})],1),t("b-form-group",{staticClass:"col-md-6",attrs:{label:"Unit Address:","label-for":"add1"}},[t("b-form-input",{attrs:{type:"text",name:"add1",id:"add1",placeholder:"Unit Address"},model:{value:e.unit.address,callback:function(t){e.$set(e.unit,"address",t)},expression:"unit.address"}})],1),t("b-form-group",{staticClass:"col-md-6",attrs:{label:"City:","label-for":"city"}},[t("b-form-input",{attrs:{type:"text",name:"city",id:"city",placeholder:"City"},model:{value:e.unit.city,callback:function(t){e.$set(e.unit,"city",t)},expression:"unit.city"}})],1)],1),t("div",[t("label",{attrs:{for:"description"}},[e._v("Description")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.unit.description,expression:"unit.description"}],staticClass:"form-control mb-0",attrs:{type:"text",id:"description",placeholder:"Enter unit description"},domProps:{value:e.unit.description},on:{input:function(t){t.target.composing||e.$set(e.unit,"description",t.target.value)}}})]),t("hr"),t("h5",{staticClass:"mb-3"},[e._v("Contact")]),t("b-row",[t("b-form-group",{staticClass:"col-md-6",attrs:{label:"Email:","label-for":"uname"}},[t("ValidationProvider",{attrs:{name:"Email",rules:"required|email"},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("b-form-input",{class:a.length>0?" is-invalid":"",attrs:{type:"text",placeholder:"Email"},model:{value:e.unit.email,callback:function(t){e.$set(e.unit,"email",t)},expression:"unit.email"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(a[0]))])])]}}])})],1),t("b-form-group",{staticClass:"col-md-6",attrs:{label:"Mobile Number:","label-for":"mobno"}},[t("ValidationProvider",{attrs:{name:"Mobile Number",rules:"required"},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("b-form-input",{class:a.length>0?" is-invalid":"",attrs:{type:"text",placeholder:"Mobile Number"},model:{value:e.unit.phone1,callback:function(t){e.$set(e.unit,"phone1",t)},expression:"unit.phone1"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(a[0]))])])]}}])})],1),t("b-form-group",{staticClass:"col-md-6",attrs:{label:"Mobile Number:","label-for":"mobno"}},[t("ValidationProvider",{attrs:{name:"Mobile Number",rules:"required"},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("b-form-input",{class:a.length>0?" is-invalid":"",attrs:{type:"text",placeholder:"Mobile Number"},model:{value:e.unit.phone2,callback:function(t){e.$set(e.unit,"phone2",t)},expression:"unit.phone2"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(a[0]))])])]}}])})],1)],1),t("div",{staticClass:"checkbox-label"},[t("label",{staticClass:"mr-5"},[e._v(" Enable: ")]),t("b-form-checkbox",{attrs:{switch:""},model:{value:e.unit.active,callback:function(t){e.$set(e.unit,"active",t)},expression:"unit.active"}})],1)],1),t("hr"),t("h5",{staticClass:"mb-3"},[e._v("Logo & Theme Colors")]),t("div",{staticClass:"float mb-3"},[e.url?t("img",{staticStyle:{height:"256px",width:"256px","border-radius":"50px"},attrs:{id:"preview",src:e.url}}):t("img",{staticStyle:{height:"256px",width:"256px","border-radius":"50px"},attrs:{id:"preview",src:""!=e.unit.logo?e.unit.logo:a("9d64")}})]),t("div",{staticClass:"checkbox-label mb-3"},[t("label",{staticClass:"mr-5",attrs:{for:"logo"}},[e._v("Logo:")]),t("b-form-file",{staticStyle:{width:"256px"},attrs:{type:"input",id:"logo",placeholder:"Enter your clinic logo"},on:{change:e.onFileChange}})],1),t("b-row",[t("b-col",{attrs:{sm:"2"}},[t("div",{staticClass:"mb-3"},[t("label",{staticClass:"mr-5"},[e._v(" Primary: ")]),t("b-form-input",{staticStyle:{width:"100px",height:"50px"},attrs:{type:"color"},model:{value:e.primaryColor,callback:function(t){e.primaryColor=t},expression:"primaryColor"}})],1)]),t("div",{staticClass:"mb-3"},[t("label",{staticClass:"mr-5"},[e._v(" Background: ")]),t("b-form-input",{staticStyle:{width:"100px",height:"50px"},attrs:{type:"color"},model:{value:e.bgColor,callback:function(t){e.bgColor=t},expression:"bgColor"}})],1)],1),t("div",{staticClass:"checkbox-label mb-3"},[t("label",{staticClass:"mr-5"},[e._v(" Default Pallet: ")]),e._l(e.colors,(function(a,i){return t("b-button",{key:i,staticClass:"mr-2",style:`background: ${a.primary} !important; width: 30px;`,on:{click:function(t){return e.changeColor(a)}}})})),t("b-button",{staticClass:"mr-2",attrs:{variant:"primary"},on:{click:function(t){return e.resetColor()}}},[e._v("Reset")])],2),t("br"),t("b-button",{staticClass:"mr-2",attrs:{variant:"primary"},on:{click:e.onSave}},[e._v("Save")]),t("b-button",{attrs:{variant:"secondary",type:"submit"},on:{click:e.onBack}},[e._v("Back")])],1)},l=[],n=a("2f62"),o=a("8925"),c={name:"ServiceForm",async mounted(){console.log(this.colors,"clinicp rops")},async created(){await this.getClinic(),""!=this.unit.logo&&(this.url=this.unit.logo)},components:{},computed:{...Object(n["c"])({clinicState:"Clinic/clinicState",colors:"Setting/colorState",primaryColorState:"Setting/primaryColor"})},watch:{primaryColor(e){this.color.primary=e,this.changeColor(this.color)},bgColor(e){this.color.bodyBgLight=e,this.changeColor(this.color)}},data(){return{url:"",unit:{},roles:[{text:"Web Designer",value:"Web Designer"},{text:"Web Developer",value:"Web Developer"},{text:"Tester",value:"Tester"},{text:"Php Developer",value:"Php Developer"},{text:"Ios Developer",value:"Ios Developer"}],countries:[{value:"Canada",text:"Canada"},{value:"Niada",text:"Niada"},{value:"USA",text:"USA"},{value:"India",text:"India"},{value:"Africa",text:"Africa"}],color:{primary:"#0db5c8",bodyBgLight:"#eff7f8"},primaryColor:"#0db5c8",bgColor:"#eff7f8"}},methods:{...Object(n["b"])({setPrimaryColor:"Setting/setPrimaryColor"}),async getClinic(){let e=this.$route.path.split("/")[3],{data:t}=await o["a"].getById(e);this.unit=t},onClick(e){this.activePage=e.target.innerHTML},onSave(){console.log(this.color,"save"),this.setPrimaryColor(this.color)},onBack(){this.$router.back(),console.log(this.primaryColorState,"cback"),this.changeColor(this.primaryColorState)},async onFileChange(e){let t=e.target.files[0];if(!t)return void(this.url=null);let a=t.type.split("/")[0];return t.size>2048e3?(this.makeWarningToast("Insert file with size less than 2mb"),void(t=null)):"image"!==a?(this.makeWarningToast("Insert an image"),void(t=null)):(this.url=URL.createObjectURL(t),void(this.unit.logo=await this.getBase64(t)))},async getBase64(e){return new Promise((t,a)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(i.result),i.onerror=e=>a(e)})},changeColor(e){document.documentElement.style.setProperty("--iq-primary",e.primary),document.documentElement.style.setProperty("--iq-bg-light-color",e.bodyBgLight),document.documentElement.style.setProperty("--iq-primary-dark",this.luminance(e.primary,-.6)),document.documentElement.style.setProperty("--iq-bg-dark-color",this.luminance(e.bodyBgLight,-.6)),this.color=e},resetColor(){this.changeColor(this.colors[0])},luminance(e,t=0){e=e.replace(/[^0-9a-f]/gi,"");const a=6===e.length||3===e.length;if(!a)throw new Error("Invalid HEX");3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);const i=0,s=255,r=e.match(/([0-9a-f]){2}/gi);let l="#";for(let n of r){const e=parseInt(n,16),a=e+255*t,r=Math.max(i,a),o=Math.min(s,r),c=Math.round(o),d=c.toString(16),u=("0"+d).slice(-2);l+=u}return l}}},d=c,u=(a("10ac"),a("2877")),m=Object(u["a"])(d,r,l,!1,null,"5b3a991a",null),f=m.exports,p=a("e493"),v=a("21d2"),b=a("6e61"),h=function(){var e=this,t=e._self._c;return t("b-container",{attrs:{fluid:""}},[t("b-row",[t("b-col",{attrs:{md:"12"}},[t("iq-card",{scopedSlots:e._u([{key:"headerTitle",fn:function(){return[t("h4",{staticClass:"card-title"},[e._v("Communication")])]},proxy:!0},{key:"body",fn:function(){return[t("iq-card",{staticStyle:{display:"flex"}},[t("div",{staticClass:"checkbox-label"},[t("label",{staticClass:"mr-5"},[e._v(" Send appointment confirmation via WhatsApp: ")]),t("b-form-checkbox",{attrs:{switch:""},model:{value:e.whatsappAutoConfirmation,callback:function(t){e.whatsappAutoConfirmation=t},expression:"whatsappAutoConfirmation"}})],1),e.whatsappAutoConfirmation?t("div",[t("label",{staticClass:"ml-5"},[e._v(" Status: "),t("b-badge",{attrs:{variant:e.colorStatus,pill:""}},[e._v(e._s(e.statusConnection))])],1),"connected"!==e.statusConnection?t("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-status-connection",modifiers:{"modal-status-connection":!0}}],staticClass:"ml-5",attrs:{size:"sm",variant:"primary"},on:{click:e.connectWhatsappInstance}},[e._v("connect it")]):e._e(),"connected"===e.statusConnection?t("b-button",{staticClass:"ml-5",attrs:{size:"sm",variant:"outline-danger"},on:{click:e.deleteSession}},[e._v("logout")]):e._e()],1):e._e()])]},proxy:!0}])},["connected"!==e.statusConnection?t("b-modal",{staticStyle:{width:"341px"},attrs:{id:"modal-status-connection",size:"sm",title:"Scan WhatsApp Qr Code: ","hide-footer":""}},[t("div",{staticClass:"modal-qrcode"},[e.b64img?t("b-img",{attrs:{src:e.b64img}}):t("b-spinner",{attrs:{label:"Spinning"}}),t("label",[e.b64img?t("b-badge",{attrs:{variant:e.colorStatus,pill:""}},[e._v(e._s(e.statusConnection))]):e._e()],1)],1)]):e._e()],1)],1)],1)],1)},g=[],y=a("dde5");const S="https://api.cliinic.cloud/whapi";var C={create(e){return y["a"].post("/session/create",e,{baseURL:S})},getStatus(e){return y["a"].get("/chat/status/"+e,{baseURL:S})},sessionExists(e){return y["a"].get("/chat/find/"+e,{baseURL:S})},delete(e){return y["a"].delete("/session/"+e,{baseURL:S})},sendMessage(e){return y["a"].post("/chat/send/",e,{baseURL:S})}},x={name:"Communication",props:{active:String},watch:{async active(e){"Communication"===e&&(await this.getStatus(),this.socketInit())},whatsappAutoConfirmation(e){e||this.deleteSession(this.clinicId)},statusConnection(e){this.setStatusColor(),"try again"===e&&(this.b64img="",this.closeModal("modal-status-connection"))}},async mounted(){},async created(){this.clinicId=this.$router.currentRoute.params.id},components:{},computed:{...Object(n["c"])({clinicState:"Clinic/clinicState",userState:"User/userState",categoryState:"Category/categoryState",serviceState:"Service/serviceState"})},methods:{...Object(n["b"])({setCategoryState:"Category/setCategoryState"}),async connectWhatsappInstance(){let e={sessionId:this.clinicId};await C.create(e)},async deleteSession(){await C.delete(this.clinicId),this.statusConnection="disconnected",this.setStatusColor()},async getStatus(){let{data:e}=await C.getStatus(this.clinicId);this.statusConnection=e.data.status,this.setStatusColor()},setStatusColor(){switch(this.statusConnection){case"disconnected":this.colorStatus="warning";break;case"connected":this.colorStatus="success";break;default:this.colorStatus="primary";break}},socketInit(){var e=io.connect("https://api.cliinic.cloud/whapi");let t=this;e.on("session.status."+this.clinicId,(function(e){t.statusConnection=e.connection})),e.on("session.qrcode."+this.clinicId,(function(e){t.b64img=e})),"connected"===this.statusConnection&&e.disconnect()}},data(){return{whatsappAutoConfirmation:!0,statusConnection:"disconnected",b64img:null,colorStatus:"none",clinicId:null}}},k=x,_=(a("9a08"),Object(u["a"])(k,h,g,!1,null,"1bc01b0e",null)),w=_.exports,N={name:"AddUser",components:{Units:f,Services:p["a"],Staffs:v["a"],Categories:b["a"],Communication:w},async created(){},data(){return{activePage:"Unit",active:!1,activeClinics:!0,activeServices:!1,activeCategories:!1}},computed:{},methods:{onClick(e){this.activePage=e.target.innerHTML}}},T=N,O=Object(u["a"])(T,i,s,!1,null,null,null);t["default"]=O.exports},"21d2":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("b-container",{attrs:{fluid:""}},[t("b-row",[t("b-col",{attrs:{md:"12"}},[t("iq-card",{scopedSlots:e._u([{key:"headerTitle",fn:function(){return[t("h4",{staticClass:"card-title"},[e._v("Staffs")])]},proxy:!0},{key:"headerAction",fn:function(){return[t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filteredText,expression:"filteredText"}],staticClass:"form-control filter-field",attrs:{type:"text",placeholder:"Filter Staffs"},domProps:{value:e.filteredText},on:{keyup:e.filter,input:function(t){t.target.composing||(e.filteredText=t.target.value)}}})]),t("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"add-staff-modal",expression:"'add-staff-modal'"}],attrs:{variant:"primary"}},[e._v("Add New")])]},proxy:!0},{key:"body",fn:function(){return[t("b-row",[t("b-col",{directives:[{name:"show",rawName:"v-show",value:e.staffs.length>0,expression:"staffs.length > 0"}],staticClass:"table-responsive",attrs:{md:"12"}},[t("b-table",{attrs:{id:"dev-table ",items:e.filteredText.length>0?e.filteredData:e.staffs,fields:e.columns,"foot-clone":""},scopedSlots:e._u([{key:"cell(fullName)",fn:function(a){return[a.item.editable?t("input",{directives:[{name:"model",rawName:"v-model",value:a.item.fullName,expression:"data.item.fullName"}],staticClass:"form-control filter-field",attrs:{type:"text"},domProps:{value:a.item.fullName},on:{input:function(t){t.target.composing||e.$set(a.item,"fullName",t.target.value)}}}):t("span",[e._v(e._s(a.item.fullName))])]}},{key:"cell(email)",fn:function(a){return[t("span",[e._v(e._s(a.item.email))])]}},{key:"cell(createdAt)",fn:function(a){return[t("span",[e._v(e._s(a.item.createdAt))])]}},{key:"cell(role)",fn:function(a){return[a.item.editable&&"admin"!==a.item.role?t("b-select",{attrs:{plain:"",options:e.roleOptions},model:{value:a.item.role,callback:function(t){e.$set(a.item,"role",t)},expression:"data.item.role"}}):t("span",[e._v(e._s(a.item.role))])]}},{key:"cell(headQuarterName)",fn:function(a){return[a.item.editable?t("b-select",{attrs:{plain:"",options:e.getClinicOptions()},model:{value:a.item.headQuarterName,callback:function(t){e.$set(a.item,"headQuarterName",t)},expression:"data.item.headQuarterName"}}):t("span",[e._v(e._s(a.item.headQuarterName))])]}},{key:"cell(performService)",fn:function(a){return["receptionist"!==a.item.role&&"customer"!==a.item.role?t("b-form-checkbox",{attrs:{name:"check-button",switch:""},on:{input:function(t){return e.togglePerformServiceStatus(a.item.id)}},model:{value:a.item.performService,callback:function(t){e.$set(a.item,"performService",t)},expression:"data.item.performService"}}):e._e()]}},{key:"cell(active)",fn:function(a){return[t("b-form-checkbox",{attrs:{name:"check-button",switch:""},on:{input:function(t){return e.toggleActiveStatus(a.item.id)}},model:{value:a.item.active,callback:function(t){e.$set(a.item,"active",t)},expression:"data.item.active"}})]}},{key:"cell(action)",fn:function(a){return[a.item.editable?t("b-button",{attrs:{variant:" iq-bg-success mr-1",size:"sm"},on:{click:function(t){return e.update(a.item)}}},[t("i",{staticClass:"ri-save-line m-0"})]):t("b-button",{attrs:{variant:" iq-bg-success mr-1",size:"sm"},on:{click:function(t){return e.edit(a.item)}}},[t("i",{staticClass:"ri-ball-pen-fill m-0"})]),a.item.editable||"admin"===a.item.role?a.item.editable?t("b-button",{attrs:{variant:" iq-bg-danger mr-1",size:"sm"},on:{click:function(t){return e.close(a.item)}}},[t("i",{staticClass:"ri-close-line m-0"})]):e._e():t("b-button",{attrs:{size:"sm",variant:" iq-bg-danger"},on:{click:function(t){return e.remove(a.item)}}},[t("i",{staticClass:"ri-delete-bin-line m-0"})])]}}])})],1)],1)]},proxy:!0}])},[t("StaffForm",{on:{onCreate:e.onCreate}})],1)],1)],1)],1)},s=[],r=a("2f62"),l=a("bcae"),n=a("1482b"),o=a("93d6"),c=function(){var e=this,t=e._self._c;return t("b-container",{attrs:{fluid:""}},[t("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function({handleSubmit:a}){return[t("b-modal",{attrs:{id:"add-staff-modal",title:"Add Staff","hide-footer":""}},[t("form",{staticClass:"mt-4",attrs:{novalidate:""}},[t("ValidationProvider",{attrs:{vid:"name",name:"Full Name",rules:"required|fullName"},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"name"}},[e._v("Name")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.staff.fullName,expression:"staff.fullName"}],class:"form-control mb-0"+(a.length>0?" is-invalid":""),attrs:{type:"text",id:"name","aria-describedby":"name",placeholder:"Staff Full Name"},domProps:{value:e.staff.fullName},on:{input:function(t){t.target.composing||e.$set(e.staff,"fullName",t.target.value)}}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(a[0]))])])])]}}],null,!0)}),t("ValidationProvider",{attrs:{vid:"email",name:"E-mail",rules:"required|email|userEmailAvailable"},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"emailInput"}},[e._v("Email address")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.staff.email,expression:"staff.email"}],class:"form-control mb-0"+(a.length>0?" is-invalid":""),attrs:{type:"email",id:"emailInput","aria-describedby":"emailHelp",placeholder:"Enter email",required:""},domProps:{value:e.staff.email},on:{input:function(t){t.target.composing||e.$set(e.staff,"email",t.target.value)}}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(a[0]))])])])]}}],null,!0)}),t("ValidationProvider",{attrs:{rules:"required|caracters",name:"basepassword"},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"text"}},[e._v("Password")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.basepassword,expression:"basepassword"}],class:"form-control mb-0"+(a.length>0?" is-invalid":""),attrs:{type:"password",id:"email",placeholder:"Enter password"},domProps:{value:e.basepassword},on:{input:function(t){t.target.composing||(e.basepassword=t.target.value)}}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(a[0]))])])])]}}],null,!0)}),t("ValidationProvider",{attrs:{name:"confirm",rules:"required|password:@basepassword"},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"text"}},[e._v("Confirm Password")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.staff.password,expression:"staff.password"}],class:"form-control mb-0"+(a.length>0?" is-invalid":""),attrs:{type:"password",id:"password",placeholder:"Enter password","data-vv-as":"basepassword"},domProps:{value:e.staff.password},on:{input:function(t){t.target.composing||e.$set(e.staff,"password",t.target.value)}}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(a[0]))])])])]}}],null,!0)}),t("ValidationProvider",{attrs:{name:"role",rules:"required|role"},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"text"}},[e._v("Role")]),t("b-form-select",{staticClass:"mb-3",attrs:{plain:"",options:e.roleOptions},scopedSlots:e._u([{key:"first",fn:function(){return[t("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v("Select staff role")])]},proxy:!0}],null,!0),model:{value:e.staff.role,callback:function(t){e.$set(e.staff,"role",t)},expression:"staff.role"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(a[0]))])])],1)]}}],null,!0)}),t("ValidationProvider",{attrs:{name:"unit",rules:"required"},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"text"}},[e._v("Staff Unit")]),t("b-form-select",{staticClass:"mb-3",attrs:{plain:"",options:e.getClinicOptions()},scopedSlots:e._u([{key:"first",fn:function(){return[t("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v("Select staff unit")])]},proxy:!0}],null,!0),model:{value:e.clinicalUnitsSelected,callback:function(t){e.clinicalUnitsSelected=t},expression:"clinicalUnitsSelected"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(a[0]))])])],1)]}}],null,!0)}),e.isDoctor()?t("div",[t("b-form-checkbox",{attrs:{id:"perform-service",name:"check-button",switch:""},model:{value:e.performService,callback:function(t){e.performService=t},expression:"performService"}},[t("a",[e._v("Performs Service?")])])],1):e._e()],1),t("hr",{staticClass:"solid"}),t("b-button",{staticClass:"float-right",attrs:{variant:"primary"},on:{click:function(t){return a(e.register)}}},[e._v("Register")])],1)]}}])})],1)},d=[],u={name:"StaffForm",props:{},watch:{performService(e){console.log(e)}},async mounted(){this.setAppRoles()},async created(){},components:{},computed:{...Object(r["c"])({clinicState:"Clinic/clinicState",clinicalUnitsState:"Clinic/clinicalUnitsState",userState:"User/userState"})},methods:{isDoctor(){return this.staff.role===n["a"].ADMIN||this.staff.role===n["a"].DOCTOR||this.staff.role===n["a"].SUPER},getClinicOptions(){let e=this.clinicalUnitsState.map(e=>e.name);return e.push(this.clinicState.name),e},randomColor(){var e=Math.round,t=Math.random,a=255;return"rgba("+e(t()*a)+","+e(t()*a)+","+e(t()*a)+")"},async register(){try{this.parseFullName(this.staff),delete this.staff.fullName,this.staff.performService=this.performService,this.staff.clinicId=this.clinicState.id,this.staff.color=this.randomColor(),this.setStaffClinicalUnitId(this.staff);let{data:e}=await o["a"].createUser(this.staff);this.$emit("onCreate",e),this.staff=this.cloneObject(this.defaultStaff),this.performService=!0,this.basepassword="",this.makeSuccessToast("Staff registered"),this.closeModal("add-staff-modal")}catch(e){console.log("error: ",e),this.makeErrorToast("Staff already exists")}},setAppRoles(){this.userState.role.includes("super")?this.roleOptions=n["b"]:this.roleOptions=n["b"].slice(1)},parseFullName(e){if(e.fullName){let t=e.fullName.split(" ");e.firstName=t[0],t.shift(),e.lastName=t.join(" ")}else e.fullName=e.firstName+" "+e.lastName},setStaffClinicalUnitId(e){let t=this.clinicalUnitsState.filter(e=>e.name===this.clinicalUnitsSelected);t.length>0?(e.clinicId=t[0].id,e.headQuarterId=this.clinicState.id):(e.clinicId=this.clinicState.id,e.headQuarterId=this.clinicState.id)}},data(){return{performService:!0,clinicalUnitsSelected:null,roleOptions:null,clinicOptions:[],basepassword:"",staff:{fullName:"",firstName:"",lastName:"",email:"",password:"",role:"",clinicId:null,isFirstUser:!1},defaultStaff:{fullName:"",firstName:"",lastName:"",email:"",password:"",role:"",clinicId:null,isFirstUser:!1}}}},m=u,f=(a("8d3b"),a("2877")),p=Object(f["a"])(m,c,d,!1,null,"6066af7f",null),v=p.exports,b={name:"UiDataTable",props:{active:String},watch:{active(e){"Staffs"===e&&this.init()}},async mounted(){l["a"].index(),this.setAppRoles(),await this.init()},async created(){},components:{StaffForm:v},computed:{...Object(r["c"])({clinicState:"Clinic/clinicState",clinicalUnitsState:"Clinic/clinicalUnitsState",userState:"User/userState"})},methods:{...Object(r["b"])({setUserState:"User/setUserState"}),async init(){await this.getAllStaffs()},getClinicOptions(){let e=this.clinicalUnitsState.filter(e=>e.active),t=e.map(e=>e.name);return t.push(this.clinicState.name),t},toggleActiveStatus(e){o["a"].toggleActiveStatus(e)},togglePerformServiceStatus(e){o["a"].togglePerformServiceStatus(e)},filter(){this.filteredData=[],this.staffs.map(e=>{(e.fullName.includes(this.filteredText)||e.email.includes(this.filteredText))&&this.filteredData.push(e)})},onCreate(e){this.staffs.push(this.parseStaff(e))},setAppRoles(){this.userState.role.includes("super")?this.roleOptions=n["b"]:this.roleOptions=n["b"].slice(1)},closeModal(e){this.$root.$emit("bv::hide::modal",e)},async getAllStaffs(){let{data:e}=await o["a"].getAllByHeadQuarterId(this.clinicState.id);this.staffs=this.parseListStaffs(e)},edit(e){this.staffs.map(e=>{e.editable=!1}),e.editable=!0},setStaffClinicalUnitId(e){let t=this.cloneObject(this.clinicalUnitsState);t.push(this.clinicState),t.map(t=>{t.name===e.headQuarterName&&(e.clinicId=t.id,e.headQuarterId=this.clinicState.id)})},async update(e){e.editable=!1,this.parseFullName(e),this.setStaffClinicalUnitId(e),console.log(e),await o["a"].update(e),this.makeSuccessToast("Staff updated")},remove(e){let t=this.filteredData.indexOf(e);this.filteredData.splice(t,1);let a=this.staffs.indexOf(e);this.staffs.splice(a,1),o["a"].deleteById(e.id),this.makeSuccessToast("Staff deleted")},close(e){e.editable=!1},parseFullName(e){if(e.fullName){let t=e.fullName.split(" ");e.firstName=t[0],t.shift(),e.lastName=t.join(" ")}else e.fullName=e.firstName+" "+e.lastName},parseStaff(e){e.fullName=e.firstName+" "+e.lastName,e.editable=!1;let t=this.cloneObject(this.clinicalUnitsState);t.push(this.clinicState);let a=t.filter(t=>t.id===e.clinicId);return e.headQuarterName=a[0].name,e},parseListStaffs(e){return e.map(e=>this.parseStaff(e))}},data(){return{clinicalUnitsSelected:null,filteredData:[],filteredText:"",roleOptions:null,basepassword:"",staff:{fullName:"",firstName:"",lastName:"",email:"",password:"",role:"",clinicId:null,isFirstUser:!1},defaultStaff:{fullName:"",firstName:"",lastName:"",email:"",password:"",role:"",clinicId:null,isFirstUser:!1},columns:[{label:"Name",key:"fullName",class:"text-left",sortable:!0},{label:"Email",key:"email",class:"text-left"},{label:"CreatedAt",key:"createdAt",class:"text-left"},{label:"Role",key:"role",class:"text-left"},{label:"Clinial Unit",key:"headQuarterName",class:"text-center"},{label:"Performs Service",key:"performService",class:"text-center"},{label:"Active",key:"active",class:"text-center"},{label:"Action",key:"action",class:"text-center"}],staffs:[]}}},h=b,g=Object(f["a"])(h,i,s,!1,null,"2f0eb30e",null);t["a"]=g.exports},"47f6":function(e,t,a){},"4c1e":function(e,t,a){},"5d90":function(e,t,a){"use strict";a("c97d")},"6e61":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("b-container",{attrs:{fluid:""}},[t("b-row",[t("b-col",{attrs:{md:"12"}},[t("iq-card",{scopedSlots:e._u([{key:"headerTitle",fn:function(){return[t("h4",{staticClass:"card-title"},[e._v("Categories")])]},proxy:!0},{key:"headerAction",fn:function(){return[t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filteredText,expression:"filteredText"}],staticClass:"form-control filter-field",attrs:{type:"text",placeholder:"Filter Categories"},domProps:{value:e.filteredText},on:{keyup:e.filter,input:function(t){t.target.composing||(e.filteredText=t.target.value)}}})]),t("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"add-category-modal",expression:"'add-category-modal'"}],attrs:{variant:"primary"}},[e._v("Add New")])]},proxy:!0},{key:"body",fn:function(){return[t("b-row",[t("b-col",{directives:[{name:"show",rawName:"v-show",value:e.categories.length>0,expression:"categories.length > 0"}],staticClass:"table-responsive",attrs:{md:"12"}},[t("b-table",{attrs:{id:"dev-table ",items:e.filteredText.length>0?e.filteredData:e.categories,fields:e.columns,"foot-clone":""},scopedSlots:e._u([{key:"cell(name)",fn:function(a){return[a.item.editable?t("input",{directives:[{name:"model",rawName:"v-model",value:a.item.name,expression:"data.item.name"}],staticClass:"form-control filter-field",attrs:{type:"text"},domProps:{value:a.item.name},on:{input:function(t){t.target.composing||e.$set(a.item,"name",t.target.value)}}}):t("span",[e._v(e._s(a.item.name))])]}},{key:"cell(description)",fn:function(a){return[a.item.editable?t("input",{directives:[{name:"model",rawName:"v-model",value:a.item.description,expression:"data.item.description"}],staticClass:"form-control filter-field",attrs:{type:"text"},domProps:{value:a.item.description},on:{input:function(t){t.target.composing||e.$set(a.item,"description",t.target.value)}}}):t("span",[e._v(e._s(a.item.description))])]}},{key:"cell(action)",fn:function(a){return[a.item.editable?t("b-button",{attrs:{variant:" iq-bg-success mr-1",size:"sm"},on:{click:function(t){return e.update(a.item)}}},[t("i",{staticClass:"ri-save-line m-0"})]):t("b-button",{attrs:{variant:" iq-bg-success mr-1",size:"sm"},on:{click:function(t){return e.edit(a.item)}}},[t("i",{staticClass:"ri-ball-pen-fill m-0"})]),a.item.editable?t("b-button",{attrs:{variant:" iq-bg-danger mr-1",size:"sm"},on:{click:function(t){return e.close(a.item)}}},[t("i",{staticClass:"ri-close-line m-0"})]):t("b-button",{attrs:{size:"sm",variant:" iq-bg-danger"},on:{click:function(t){return e.remove(a.item)}}},[t("i",{staticClass:"ri-delete-bin-line m-0"})])]}},{key:"cell(active)",fn:function(a){return[t("b-form-checkbox",{attrs:{name:"check-button",switch:""},on:{input:function(t){return e.toggleStatus(a.item.id)}},model:{value:a.item.active,callback:function(t){e.$set(a.item,"active",t)},expression:"data.item.active"}})]}}])})],1)],1)]},proxy:!0}])},[t("CategoryForm",{on:{onCreate:e.onCreate}})],1)],1)],1)],1)},s=[],r=a("2f62"),l=a("16a4"),n=function(){var e=this,t=e._self._c;return t("b-container",{attrs:{fluid:""}},[t("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function({handleSubmit:a}){return[t("b-modal",{attrs:{id:"add-category-modal",title:"Add Category","hide-footer":""}},[t("form",{staticClass:"mt-4",attrs:{novalidate:""}},[t("ValidationProvider",{attrs:{vid:"name",name:"Category name",rules:"required"},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"category"}},[e._v("Category")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.category.name,expression:"category.name"}],class:"form-control mb-0"+(a.length>0?" is-invalid":""),attrs:{type:"text",id:"category","aria-describedby":"category",placeholder:"Category name"},domProps:{value:e.category.name},on:{input:function(t){t.target.composing||e.$set(e.category,"name",t.target.value)}}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(a[0]))])])])]}}],null,!0)}),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"category-description"}},[e._v("Category Description")]),t("b-form-textarea",{attrs:{type:"category",place:"",holder:"Enter category description",rows:"5"},model:{value:e.category.description,callback:function(t){e.$set(e.category,"description",t)},expression:"category.description"}})],1)],1),t("hr",{staticClass:"solid"}),t("b-button",{staticClass:"float-right",attrs:{variant:"primary"},on:{click:function(t){return a(e.register)}}},[e._v("Register")])],1)]}}])})],1)},o=[],c={name:"CategoryForm",props:{},async mounted(){},async created(){},components:{},computed:{...Object(r["c"])({clinicState:"Clinic/clinicState"})},methods:{async register(){try{this.category.clinicId=this.clinicState.id;let{data:e}=await l["a"].create(this.category);this.closeModal("add-category-modal"),this.$emit("onCreate",e),this.category=this.defaultCategory,this.makeSuccessToast("Category registered")}catch{this.makeErrorToast("Category already exists")}}},data(){return{category:{name:"",description:"",clinicId:null},defaultCategory:{name:"",description:""},columns:[{label:"Name",key:"name",class:"text-left",sortable:!0},{label:"Description",key:"description",class:"text-left"},{label:"Action",key:"action",class:"text-center"},{label:"Active",key:"active",class:"text-center"}]}}},d=c,u=(a("5d90"),a("2877")),m=Object(u["a"])(d,n,o,!1,null,"ab3c544e",null),f=m.exports,p={name:"Categories",props:{active:String},watch:{active(e){"Categories"===e&&this.init()}},async mounted(){},async created(){},components:{CategoryForm:f},computed:{...Object(r["c"])({clinicState:"Clinic/clinicState",userState:"User/userState",categoryState:"Category/categoryState",serviceState:"Service/serviceState"})},methods:{...Object(r["b"])({setCategoryState:"Category/setCategoryState"}),init(){this.getAllCategories()},toggleStatus(e){l["a"].toggleStatus(e)},filter(){this.filteredData=[],this.categories.map(e=>{(e.name.includes(this.filteredText)||e.description.includes(this.filteredText))&&this.filteredData.push(e)})},onCreate(e){this.categories.push(this.parseCategory(e)),this.setCategoryState(this.cloneObject(this.categories))},getAllCategories(){let e=this.cloneObject(this.categoryState);this.categories=this.parseListCategories(e),console.log(this.categories,"catego")},edit(e){this.categories.map(e=>{e.editable=!1}),e.editable=!0},async update(e){e.editable=!1,console.log(e),await l["a"].update(e),this.setCategoryState(this.cloneObject(this.categories)),this.getAllCategories(),this.makeSuccessToast("Changes made")},async remove(e){let{data:t}=await l["a"].deleteById(e.id);if(t){let t=this.filteredData.indexOf(e);this.filteredData.splice(t,1);let a=this.categories.indexOf(e);return this.categories.splice(a,1),this.setCategoryState(this.cloneObject(this.categories)),void this.makeSuccessToast("Category deleted")}this.makeWarningToast("This category is in use")},close(e){e.editable=!1},parseCategory(e){return e.editable=!1,e},parseListCategories(e){if(e)return e.map(e=>this.parseCategory(e))}},data(){return{filteredData:[],filteredText:"",category:{name:"",description:"",clinicId:null},defaultCategory:{name:"",description:""},columns:[{label:"Name",key:"name",class:"text-left",sortable:!0},{label:"Description",key:"description",class:"text-left"},{label:"Action",key:"action",class:"text-center"},{label:"Active",key:"active",class:"text-center"}],categories:[]}}},v=p,b=(a("c290"),Object(u["a"])(v,i,s,!1,null,"7aec8cfd",null));t["a"]=b.exports},"86c5":function(e,t,a){"use strict";a("f3eb")},"8d3b":function(e,t,a){"use strict";a("926b")},"926b":function(e,t,a){},"9a08":function(e,t,a){"use strict";a("0687")},"9d37":function(e,t,a){},c290:function(e,t,a){"use strict";a("4c1e")},c97d:function(e,t,a){},e493:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("b-container",{attrs:{fluid:""}},[t("b-row",[t("b-col",{attrs:{md:"12"}},[t("iq-card",{scopedSlots:e._u([{key:"headerTitle",fn:function(){return[t("h4",{staticClass:"card-title"},[e._v(e._s(e.$t("settings.servicesTab.name")))])]},proxy:!0},{key:"headerAction",fn:function(){return[t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filteredText,expression:"filteredText"}],staticClass:"form-control filter-field",attrs:{type:"text",placeholder:"Filter Services"},domProps:{value:e.filteredText},on:{keyup:e.filter,input:function(t){t.target.composing||(e.filteredText=t.target.value)}}})]),t("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"add-service-modal",expression:"'add-service-modal'"}],attrs:{variant:"primary"}},[e._v(e._s(e.$t("settings.servicesTab.services.addNew")))])]},proxy:!0},{key:"body",fn:function(){return[t("b-row",[t("b-col",{directives:[{name:"show",rawName:"v-show",value:e.services.length>0,expression:"services.length > 0"}],staticClass:"table-responsive",attrs:{md:"12"}},[t("b-table",{attrs:{id:"dev-table ",items:e.filteredText.length>0?e.filteredData:e.services,fields:e.columns,"foot-clone":""},scopedSlots:e._u([{key:"cell(name)",fn:function(a){return[a.item.editable?t("input",{directives:[{name:"model",rawName:"v-model",value:a.item.name,expression:"data.item.name"}],staticClass:"form-control filter-field",attrs:{type:"text"},domProps:{value:a.item.name},on:{input:function(t){t.target.composing||e.$set(a.item,"name",t.target.value)}}}):t("span",[e._v(e._s(a.item.name))])]}},{key:"cell(description)",fn:function(a){return[a.item.editable?t("input",{directives:[{name:"model",rawName:"v-model",value:a.item.description,expression:"data.item.description"}],staticClass:"form-control filter-field",attrs:{type:"text"},domProps:{value:a.item.description},on:{input:function(t){t.target.composing||e.$set(a.item,"description",t.target.value)}}}):t("span",[e._v(e._s(a.item.description))])]}},{key:"cell(category)",fn:function(a){return[a.item.editable?t("b-select",{attrs:{plain:"",options:e.getCategoriesOptions()},model:{value:a.item.category.name,callback:function(t){e.$set(a.item.category,"name",t)},expression:"data.item.category.name"}}):t("span",{attrs:{value:null,disabled:""}},[e._v(e._s(e.getCategoryName(a.item)))])]}},{key:"cell(price)",fn:function(a){return[a.item.editable?t("input",{directives:[{name:"model",rawName:"v-model",value:a.item.price,expression:"data.item.price"}],staticClass:"form-control filter-field",attrs:{type:"text"},domProps:{value:a.item.price},on:{input:function(t){t.target.composing||e.$set(a.item,"price",t.target.value)}}}):t("span",{attrs:{value:null,disabled:""}},[e._v(e._s(a.item.price))])]}},{key:"cell(color)",fn:function(a){return[a.item.color?t("b-form-input",{staticClass:"form-control filter-field",attrs:{type:"color"},model:{value:a.item.color,callback:function(t){e.$set(a.item,"color",t)},expression:"data.item.color"}}):t("span",{attrs:{value:null,disabled:""}},[e._v(e._s(a.item.color))])]}},{key:"cell(action)",fn:function(a){return[a.item.editable?t("b-button",{attrs:{variant:" iq-bg-success mr-1",size:"sm"},on:{click:function(t){return e.update(a.item)}}},[t("i",{staticClass:"ri-save-line m-0"})]):t("b-button",{attrs:{variant:" iq-bg-success mr-1",size:"sm"},on:{click:function(t){return e.edit(a.item)}}},[t("i",{staticClass:"ri-ball-pen-fill m-0"})]),a.item.editable?t("b-button",{attrs:{variant:" iq-bg-danger mr-1",size:"sm"},on:{click:function(t){return e.close(a.item)}}},[t("i",{staticClass:"ri-close-line m-0"})]):t("b-button",{attrs:{size:"sm",variant:" iq-bg-danger"},on:{click:function(t){return e.remove(a.item)}}},[t("i",{staticClass:"ri-delete-bin-line m-0"})])]}},{key:"cell(active)",fn:function(a){return[t("b-form-checkbox",{attrs:{name:"check-button",switch:""},on:{input:function(t){return e.toggleStatus(a.item.id)}},model:{value:a.item.active,callback:function(t){e.$set(a.item,"active",t)},expression:"data.item.active"}})]}}])})],1)],1)]},proxy:!0}])},[t("ServiceForm",{attrs:{categories:e.categories},on:{onCreate:e.onCreate}})],1)],1)],1)],1)},s=[],r=a("2f62"),l=a("e990"),n=function(){var e=this,t=e._self._c;return t("b-container",{attrs:{fluid:""}},[t("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function({handleSubmit:a}){return[t("b-modal",{attrs:{id:"add-service-modal",title:"Add Service","hide-footer":""}},[t("form",{staticClass:"mt-4",attrs:{novalidate:""}},[t("ValidationProvider",{attrs:{vid:"name",name:"Service name",rules:"required"},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"service"}},[e._v("Service")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.service.name,expression:"service.name"}],class:"form-control mb-0"+(a.length>0?" is-invalid":""),attrs:{type:"text",id:"service","aria-describedby":"service",placeholder:"Service name"},domProps:{value:e.service.name},on:{input:function(t){t.target.composing||e.$set(e.service,"name",t.target.value)}}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(a[0]))])])])]}}],null,!0)}),t("ValidationProvider",{attrs:{vid:"service-category",name:"Service category",rules:"required"},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"service-category"}},[e._v("Service category")]),t("b-form-select",{staticClass:"mb-3",attrs:{plain:"",options:e.getCategoriesOptions()},model:{value:e.service.categoryName,callback:function(t){e.$set(e.service,"categoryName",t)},expression:"service.categoryName"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(a[0]))])])],1)]}}],null,!0)}),t("ValidationProvider",{attrs:{vid:"service-price",name:"Service price",rules:"required|amount"},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"service-price"}},[e._v("Service price")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.service.price,expression:"service.price"}],class:"form-control mb-0"+(a.length>0?" is-invalid":""),attrs:{type:"text",id:"service-price","aria-describedby":"service",placeholder:"Service price"},domProps:{value:e.service.price},on:{input:function(t){t.target.composing||e.$set(e.service,"price",t.target.value)}}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(a[0]))])])])]}}],null,!0)}),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"service-description"}},[e._v("Service Description")]),t("b-form-textarea",{attrs:{type:"service",placeholder:"Enter service description",rows:"5"},model:{value:e.service.description,callback:function(t){e.$set(e.service,"description",t)},expression:"service.description"}})],1),t("div",{staticClass:"mb-3"},[t("label",{staticClass:"mr-5"},[e._v(" Primary: ")]),t("b-form-input",{staticStyle:{width:"100px",height:"50px"},attrs:{type:"color"},model:{value:e.service.color,callback:function(t){e.$set(e.service,"color",t)},expression:"service.color"}})],1)],1),t("hr",{staticClass:"solid"}),t("b-button",{staticClass:"float-right",attrs:{variant:"primary"},on:{click:function(t){return a(e.register)}}},[e._v("Register")])],1)]}}])})],1)},o=[],c={name:"ServiceForm",props:{categories:[]},async mounted(){},async created(){},components:{},computed:{...Object(r["c"])({clinicState:"Clinic/clinicState"})},methods:{async register(){try{this.service.clinicId=this.clinicState.id,this.getCategoryId(this.service);let{data:e}=await l["a"].create(this.service);this.$emit("onCreate",this.parseServiceType(e)),this.service=this.defaultService,this.makeSuccessToast("Service registered"),this.closeModal("add-service-modal")}catch{this.makeErrorToast("Service already exists")}},getCategoriesOptions(){let e=this.categories.map(e=>e.name);return e},parseServiceType(e){return e.editable=!1,e.categoryName=e.category.name,e},getCategoryId(e){this.categories.map(t=>{t.name===e.categoryName&&(e.categoryId=t.id)})}},data(){return{service:{name:"",description:"",clinicId:null,color:""},defaultService:{name:"",description:""}}}},d=c,u=(a("86c5"),a("2877")),m=Object(u["a"])(d,n,o,!1,null,"28554fb0",null),f=m.exports,p={name:"UiDataTable",props:{active:String},watch:{active(e){e===this.$t("settings.servicesTab.name")&&this.init()}},async mounted(){},async created(){},components:{ServiceForm:f},computed:{...Object(r["c"])({clinicState:"Clinic/clinicState",categoryState:"Category/categoryState",serviceState:"Service/serviceState"})},methods:{getCategoryName(e){let t=this.categories.filter(t=>t.id===e.categoryId);return t[0].name},...Object(r["b"])({setServiceState:"Service/setServiceState"}),init(){this.getAllServices(),this.getAllCategories()},toggleStatus(e){l["a"].toggleStatus(e),this.setServiceState(this.cloneObject(this.services))},getCategoriesOptions(){let e=this.categories.map(e=>e.name);return e},filter(){this.filteredData=[],this.services.map(e=>{(e.name.includes(this.filteredText)||e.description.includes(this.filteredText))&&this.filteredData.push(e)})},onCreate(e){this.services.push(this.parseServiceType(e)),this.setServiceState(this.cloneObject(this.services))},async getAllServices(){let e=this.cloneObject(this.serviceState);this.services=this.parseListServicesType(e)},async getAllCategories(){this.categories=this.cloneObject(this.categoryState)},edit(e){this.services.map(e=>{e.editable=!1}),e.editable=!0;let t=this.categoryState.filter(t=>t.id===e.category.id);e.category.name=t[0].name},async update(e){e.editable=!1,this.getCategoryId(e),await l["a"].update(e),this.setServiceState(this.services),this.init(),this.makeSuccessToast(this.$t("settings.servicesTab.messages.changes"))},getCategoryId(e){this.categories.map(t=>{t.name===e.category.name&&(e.categoryId=t.id)})},async remove(e){let{data:t}=await l["a"].deleteById(e.id);if(t){let t=this.filteredData.indexOf(e);this.filteredData.splice(t,1);let a=this.services.indexOf(e);return this.services.splice(a,1),this.setServiceState(this.services),void this.makeSuccessToast(this.$t("settings.servicesTab.messages.serviceDeleted"))}this.makeWarningToast(this.$t("settings.servicesTab.messages.serviceIsUse"))},close(e){e.editable=!1},parseServiceType(e){return e.editable=!1,console.log(e),e},parseListServicesType(e){return e.map(e=>this.parseServiceType(e))}},data(){return{filteredData:[],filteredText:"",service:{name:"",description:"",category:{},price:""},defaultService:{name:"",description:"",category:"",price:""},columns:[{label:this.$t("settings.servicesTab.services.nameService"),key:"name",class:"text-left",sortable:!0},{label:this.$t("settings.servicesTab.services.description"),key:"description",class:"text-left"},{label:this.$t("settings.servicesTab.services.category"),key:"category",class:"text-left"},{label:this.$t("settings.servicesTab.services.price"),key:"price",class:"text-left"},{label:this.$t("settings.servicesTab.services.color"),key:"color",class:"text-left"},{label:this.$t("settings.servicesTab.services.action"),key:"action",class:"text-center"},{label:this.$t("settings.servicesTab.services.active"),key:"active",class:"text-center"}],categories:[],category:null,services:[]}}},v=p,b=(a("0236"),Object(u["a"])(v,i,s,!1,null,"0f5038bf",null));t["a"]=b.exports},e990:function(e,t,a){"use strict";var i=a("dde5"),s=a("0be0");t["a"]={create(e){let t=s["a"].deleteUnusedProps(s["a"].cloneObject(e));return i["a"].post("/services",t)},update(e){let t=s["a"].deleteUnusedProps(s["a"].cloneObject(e));return i["a"].patch("/services/"+e.id,t)},getById(e){return i["a"].get("/services/id/"+e)},deleteById(e){return i["a"].delete("/services/"+e)},getAll(){return i["a"].get("/services/")},toggleStatus(e){return i["a"].patch("/services/toggleStatus/"+e)}}},f3eb:function(e,t,a){}}]);
//# sourceMappingURL=chunk-333ce3ae.d98327a7.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0337f65c"],{9717:function(e,t,a){},a3ef:function(e,t,a){},f450:function(e,t,a){"use strict";a("a3ef")},f7b0:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("b-container",{attrs:{fluid:""}},[t("b-row",[t("b-col",{attrs:{md:"3"}},[t("iq-card",{staticClass:"calender-small",scopedSlots:e._u([{key:"body",fn:function(){return[t("flat-pickr",{staticClass:"d-none",attrs:{config:e.config,value:Date.now()},on:{"on-change":function(t){return e.goToDate(e.date)}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})]},proxy:!0}])}),t("iq-card",{scopedSlots:e._u([{key:"headerTitle",fn:function(){return[t("h4",{staticClass:"card-title"},[e._v("Doctors")])]},proxy:!0},{key:"headerAction",fn:function(){return[t("div",{staticClass:"iq-search-bar"},[t("form",{attrs:{action:"#"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchText,expression:"searchText"}],staticClass:"search-input",attrs:{id:"search",type:"text",placeholder:"Type here to search..."},domProps:{value:e.searchText},on:{input:function(t){t.target.composing||(e.searchText=t.target.value)}}})])])]},proxy:!0}])},[t("b-form-group",{scopedSlots:e._u([{key:"label",fn:function(){return[t("ul",[t("b-form-checkbox",{staticClass:"m-0 p-0 job-classification",attrs:{indeterminate:e.indeterminate,"aria-describedby":"fullName","aria-controls":"fullName"},on:{change:e.toggleAll},model:{value:e.allSelected,callback:function(t){e.allSelected=t},expression:"allSelected"}},[e._v(" "+e._s(e.allSelected?"Un-select All":"Select All")+" ")]),t("b-form-group",{scopedSlots:e._u([{key:"default",fn:function({ariaDescribedby:a}){return e._l(e.filteredList,(function(s){return t("b-checkbox",{key:s.fullName,staticClass:"custom-checkbox-color-check",attrs:{color:s.color,value:s,"aria-describedby":a,stacked:""},on:{change:e.toggleEventFilter},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[e._v(" "+e._s(s.fullName)+" ")])}))}}])})],1)]},proxy:!0}])})],1),t("iq-card",{scopedSlots:e._u([{key:"headerTitle",fn:function(){return[t("h4",{staticClass:"card-title"},[e._v("Today's Schedule")])]},proxy:!0},{key:"body",fn:function(){return[t("ul",{staticClass:"m-0 p-0 today-schedule"},e._l(e.getDayEvents(),(function(a){return t("li",{key:a.id,staticClass:"d-flex"},[t("div",{staticClass:"schedule-icon"},[t("i",{staticClass:"ri-checkbox-blank-circle-fill text-primary"})]),t("div",{staticClass:"schedule-text"},[t("span",[e._v(e._s(a.title))]),t("span",[e._v(e._s(e.getPeriodConsult(a)))])])])})),0)]},proxy:!0}])})],1),t("b-col",{attrs:{md:"9"}},[t("iq-card",{scopedSlots:e._u([{key:"headerTitle",fn:function(){return[t("h4",{staticClass:"card-title"},[e._v("Calendar")])]},proxy:!0},{key:"headerAction",fn:function(){return[t("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.showModal()}}},[t("i",{staticClass:"ri-add-line mr-2"}),e._v("Book Appointment")]),t("CalendarForm",{attrs:{onDateClick:e.onDateClick}})]},proxy:!0},{key:"body",fn:function(){return[t("FullCalendar",{on:{onDateClickEvent:function(t){return e.onDateClickEvent(t)}}})]},proxy:!0}])})],1)],1)],1)},n=[],l=a("2f62"),i=a("bcae"),r=function(){var e=this,t=e._self._c;return t("div",[t("b-modal",{attrs:{"hide-footer":"",title:"Appointment",id:"form-calendar-modal"}},[t("div",[t("b-row",{attrs:{lg:"2"}},[t("b-col",[t("span",[e._v("day")]),t("b-form-datepicker",{attrs:{id:"example-datepicker","date-format-options":{day:"numeric",month:"numeric",year:"numeric"}},model:{value:e.event.startStr,callback:function(t){e.$set(e.event,"startStr",t)},expression:"event.startStr"}})],1)],1),t("b-row",{attrs:{lg:"2"}},[t("b-col",[t("span",[e._v("start")]),t("b-form-timepicker",{attrs:{id:"hourpicker-start",disabled:e.event.allDay},model:{value:e.event.start,callback:function(t){e.$set(e.event,"start",t)},expression:"event.start"}})],1),t("b-col",[t("span",[e._v("end")]),t("b-form-timepicker",{attrs:{id:"hourpicker-end",disabled:e.event.allDay},model:{value:e.event.end,callback:function(t){e.$set(e.event,"end",t)},expression:"event.end"}})],1)],1),t("b-form-checkbox",{attrs:{switch:""},model:{value:e.event.allDay,callback:function(t){e.$set(e.event,"allDay",t)},expression:"event.allDay"}},[e._v(" All Day ")]),t("span",[e._v("groupId")]),t("b-form-input",{attrs:{placeholder:"groupId"},model:{value:e.event.groupId,callback:function(t){e.$set(e.event,"groupId",t)},expression:"event.groupId"}}),t("span",[e._v("title")]),t("b-form-input",{attrs:{placeholder:"title"},model:{value:e.event.title,callback:function(t){e.$set(e.event,"title",t)},expression:"event.title"}}),t("span",[e._v("Doctor")]),t("b-select",{attrs:{plain:""},scopedSlots:e._u([{key:"first",fn:function(){return[t("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v("Select the doctor")])]},proxy:!0}]),model:{value:e.event.staff,callback:function(t){e.$set(e.event,"staff",t)},expression:"event.staff"}},e._l(this.staffs,(function(a){return t("b-select-option",{key:a.id,attrs:{value:a}},[e._v(e._s(a.fullName))])})),1),t("span",[e._v("url")]),t("b-form-input",{attrs:{placeholder:"url"},model:{value:e.event.url,callback:function(t){e.$set(e.event,"url",t)},expression:"event.url"}}),t("span",[e._v("classNames")]),t("b-form-input",{attrs:{placeholder:"classNames"},model:{value:e.event.classNames,callback:function(t){e.$set(e.event,"classNames",t)},expression:"event.classNames"}}),t("span",[e._v("backgroundColor")]),t("b-form-input",{attrs:{placeholder:"backgroundColor"},model:{value:e.event.backgroundColor,callback:function(t){e.$set(e.event,"backgroundColor",t)},expression:"event.backgroundColor"}}),t("span",[e._v("borderColor")]),t("b-form-input",{attrs:{placeholder:"borderColor"},model:{value:e.event.borderColor,callback:function(t){e.$set(e.event,"borderColor",t)},expression:"event.borderColor"}}),t("span",[e._v("textColor")]),t("b-form-input",{attrs:{placeholder:"textColor"},model:{value:e.event.textColor,callback:function(t){e.$set(e.event,"textColor",t)},expression:"event.textColor"}}),t("b-form-checkbox",{attrs:{switch:""},model:{value:e.outTime,callback:function(t){e.outTime=t},expression:"outTime"}},[e._v(" out time ")]),t("b-form-checkbox",{attrs:{switch:""},model:{value:e.event.resourceEditable,callback:function(t){e.$set(e.event,"resourceEditable",t)},expression:"event.resourceEditable"}},[e._v(" resourceEditable ")]),t("b-form-checkbox",{attrs:{switch:""},model:{value:e.event.startEditable,callback:function(t){e.$set(e.event,"startEditable",t)},expression:"event.startEditable"}},[e._v(" startEditable ")]),t("b-form-checkbox",{attrs:{switch:""},model:{value:e.event.durationEditable,callback:function(t){e.$set(e.event,"durationEditable",t)},expression:"event.durationEditable"}},[e._v(" durationEditable ")])],1),t("b-row",{staticClass:"text-center float-right"},[t("b-button",{staticClass:"mt-2",attrs:{variant:"outline-warning"},on:{click:e.hideModal}},[e._v("Close")]),t("b-button",{staticClass:"mt-2",attrs:{variant:"outline-danger"},on:{click:e.remove}},[e._v("Remove")]),t("b-button",{staticClass:"mt-2",attrs:{variant:"success "},on:{click:e.save}},[e._v("Save")])],1)],1)],1)},o=[],c=a("93d6"),d={props:["onDateClick"],data(){return{event:{groupId:null,allDay:!1,start:null,end:null,title:null,url:null,classNames:null,display:null,backgroundColor:null,borderColor:null,overlap:!1,startEditable:!0,durationEditable:!0,resourceEditable:!0,textColor:null,extendedProps:{staff:{fullName:""}}},staffs:[],selectedStaff:null,outTime:!1}},mounted(){this.getAllStaffs()},watch:{onDateClick(e){if(console.log("event form",e),e.id){let t=this.events.filter(t=>t.id==e.id)[0];this.event=this.cloneObject(t),console.log("exist",this.event)}else this.event=this.cloneObject(e),this.event.allDay=!1,console.log("new",this.event);let t=e.startStr?new Date(e.startStr).toISOString().split("T")[0]:this.event.dateStr;if(this.event.startStr=t,!e.allDay){console.log(this.event.end,"ned");let e=new Date(this.event.start?this.event.start:this.event.startStr),t=new Date(this.event.end?this.event.end:new Date(this.event.startStr).setMinutes(e.getMinutes()+30));console.log(e,t,"aqui"),this.event.start=e.toLocaleTimeString(),this.event.end=t.toLocaleTimeString()}}},methods:{...Object(l["b"])({deleteEvent:"Calendar/deleteEvent",createEvent:"Calendar/createEvent",updateEvent:"Calendar/updateEvent"}),async getAllStaffs(){let{data:e}=await c["a"].getAllByHeadQuarterId(this.clinicState.id);this.staffs=this.parseListStaffs(e)},parseStaff(e){return e.fullName=e.firstName+" "+e.lastName,e},parseListStaffs(e){return e.map(e=>this.parseStaff(e))},save(){console.log("save evevent",this.event),this.event.classNames="event-"+this.event.staff.id,this.event.allDay||(this.event.start=this.event.start?new Date(this.event.startStr.split("T",1)+"T"+this.event.start).toISOString():this.event.dateStr,this.event.end=this.event.start?new Date(this.event.startStr.split("T",1)+"T"+this.event.end).toISOString():this.event.dateStr),this.outTime&&(this.event.overlap=!1,this.event.display="background"),this.event.id?this.updateEvent(this.event):(this.event.id=2*Math.random(),this.createEvent(this.event)),this.hideModal()},remove(){this.hideModal(),this.deleteEvent(this.onDateClick.id)},hideModal(){this.$bvModal.hide("form-calendar-modal")}},computed:{...Object(l["c"])({clinicState:"Clinic/clinicState",events:"Calendar/events"})}},u=d,v=(a("f450"),a("2877")),f=Object(v["a"])(u,r,o,!1,null,"fd224664",null),h=f.exports,m={name:"Calendar",components:{CalendarForm:h},data(){return{config:{inline:!0},showForm:!1,onDateClick:null,date:null,selected:[],staffs:[],allSelected:!0,indeterminate:!1,searchText:""}},created(){},mounted(){i["a"].index(),this.getAllStaffs(),this.showEvents(null,!0)},watch:{selected(e,t){0===e.length?(this.indeterminate=!1,this.allSelected=!1):e.length===this.filteredList.length?(this.indeterminate=!1,this.allSelected=!0):(this.indeterminate=!0,this.allSelected=!1)}},computed:{...Object(l["c"])({events:"Calendar/events",clinicState:"Clinic/clinicState"}),filteredList(){return this.staffs.length>0?this.staffs.filter(e=>e.fullName.normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().includes(this.searchText.toLowerCase())):""}},methods:{...Object(l["b"])({goToDate:"Calendar/goToDate",updateEvent:"Calendar/updateEvent"}),async getAllStaffs(){let{data:e}=await c["a"].getAllByHeadQuarterId(this.clinicState.id);this.staffs=this.selected=this.parseListStaffs(e)},parseStaff(e){return e.fullName=e.firstName+" "+e.lastName,e},parseListStaffs(e){return e.map(e=>this.parseStaff(e))},toggleEventFilter(e){this.staffs.map(e=>{this.hiddenEvents(e.id)}),e.map(e=>{this.showEvents(e.id)})},toggleAll(e){this.selected=e?this.filteredList.slice():[],e?this.selected.map(e=>{this.showEvents(e.id)}):this.staffs.map(e=>{this.hiddenEvents(e.id)})},hiddenEvents(e){let t=window.document.getElementsByClassName("event-"+e);Array.from(t).forEach(e=>{e.classList.add("hidden-event")}),this.events.map(t=>{if(t.classNames=="event-"+e){let a=this.cloneObject(t);a.classNames="event-"+e+" hidden-event",console.log("updateevent hide",t.classNames),this.updateEvent(a)}})},showEvents(e,t=!1){if(t)return void this.events.map(e=>{let t=this.cloneObject(e);t.classNames="event-"+e.staff.id,this.updateEvent(t)});let a=window.document.getElementsByClassName("event-"+e);Array.from(a).forEach(e=>{e.classList.remove("hidden-event")}),this.events.map(t=>{if(t.classNames=="event-"+e+" hidden-event"){let a=this.cloneObject(t);a.classNames="event-"+e,console.log("updateevent show",t.title),this.updateEvent(a)}})},onDateClickEvent(e){this.onDateClick=e},showModal(){this.$bvModal.show("form-calendar-modal"),console.log("show form")},getDayEvents(){let e=this.events.filter(e=>{let t=(new Date).getDate(),a=new Date(e.start||e.date).getDate();return a===t});return e},getPeriodConsult(e){if(e.allDay)return"all day";let t=new Date(e.start),a=new Date(e.end),s=this.getTime(t),n=this.getTime(a);return`${s} to ${n}`},getTime(e){var t=new Date(e),a=t.getHours(),s=t.getMinutes();return a=this.checkTime(a),s=this.checkTime(s),a+":"+s},checkTime(e){return e<10&&(e="0"+e),e}}},p=m,b=(a("fcdd"),Object(v["a"])(p,s,n,!1,null,"fa653ca8",null));t["default"]=b.exports},fcdd:function(e,t,a){"use strict";a("9717")}}]);
//# sourceMappingURL=chunk-0337f65c.a69fe9db.js.map
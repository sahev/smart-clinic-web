(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f8f7e39"],{2284:function(t,e,i){"use strict";i("5516")},"3f42":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("b-container",{attrs:{fluid:""}},[e("iq-card",{scopedSlots:t._u([{key:"headerTitle",fn:function(){return[e("h4",{staticClass:"card-title"},[t._v("Clinic Settings")])]},proxy:!0},{key:"headerAction",fn:function(){return[e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filteredText,expression:"filteredText"}],staticClass:"form-control filter-field",attrs:{type:"text",placeholder:"Filter Clinics"},domProps:{value:t.filteredText},on:{keyup:t.filter,input:function(e){e.target.composing||(t.filteredText=e.target.value)}}})]),e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"add-unit-modal",expression:"'add-unit-modal'"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"primary",title:"User logged must be headquarter clinic",disabled:t.isHeadQuarterClinic}},[t._v("Add New")])]},proxy:!0},{key:"body",fn:function(){return[e("iq-card",t._l(t.filteredText.length>0?t.filteredData:t.units,(function(i){return e("b-card",{key:i.id,class:"card-list mb-2 shadow-sm border-5 border-left border-status-"+(i.active?"active":"disabled"),on:{click:function(e){return t.onClick(i.id)}}},[e("b-card-title",{staticClass:"float"},[t._v(" "+t._s(i.alias)+" "),e("small",{staticClass:"text-muted"},[t._v("| "+t._s(i.name))])]),e("b-card-text",[t._v(" "+t._s(i.description)+" ")])],1)})),1),t.notFound?e("b-card-text",{staticClass:"text-center"},[t._v(" Clinic not found ")]):t._e()]},proxy:!0}])})],1)},r=[],n=i("2f62"),s=function(){var t=this,e=t._self._c;return e("b-container",{attrs:{fluid:""}},[e("ValidationObserver",{ref:"form",scopedSlots:t._u([{key:"default",fn:function({handleSubmit:i}){return[e("b-modal",{attrs:{id:"add-unit-modal",title:"Add Unit","hide-footer":""}},[e("form",{staticClass:"mt-4",attrs:{novalidate:""}},[e("div",{staticClass:"form-group"},[e("div",{attrs:{id:"preview"}},[t.url?e("img",{attrs:{src:t.url}}):t._e()]),e("label",{attrs:{for:"name"}},[t._v("Logo")]),e("b-form-file",{attrs:{type:"input",id:"name",placeholder:"Enter your unit logo"},on:{change:t.onFileChange}})],1),e("ValidationProvider",{attrs:{rules:"required|min:5|max:20",vid:"unitname",name:"Alias"},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"unitname"}},[t._v("Unit Name")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.unit.name,expression:"unit.name"}],class:"form-control mb-0"+(i.length>0?" is-invalid":""),attrs:{type:"text",id:"unitname",placeholder:"Enter unit name"},domProps:{value:t.unit.name},on:{input:function(e){e.target.composing||t.$set(t.unit,"name",e.target.value)}}}),e("div",{staticClass:"invalid-feedback"},[e("span",[t._v(t._s(i[0]))])])])]}}],null,!0)}),e("ValidationProvider",{attrs:{vid:"unitalias",name:"unit alias",rules:"required|min:2|max:10"},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"text"}},[t._v("Unit Alias ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.unit.alias,expression:"unit.alias"}],class:"controllllll form-control mb-0"+(i.length>0?" is-invalid":""),attrs:{type:"text",id:"unitalias",placeholder:"Your Unit Alias"},domProps:{value:t.unit.alias},on:{input:function(e){e.target.composing||t.$set(t.unit,"alias",e.target.value)}}}),e("div",{staticClass:"invalid-feedback"},[e("span",[t._v(t._s(i[0]))])])])]}}],null,!0)}),e("ValidationProvider",{attrs:{rules:"required|min:1|max:3",name:"currency"},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"currency"}},[t._v("Currency")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.unit.currency,expression:"unit.currency"}],class:"form-control mb-0"+(i.length>0?" is-invalid":""),attrs:{type:"text",id:"currency",placeholder:"Enter currency (R$, $)"},domProps:{value:t.unit.currency},on:{input:function(e){e.target.composing||t.$set(t.unit,"currency",e.target.value)}}}),e("div",{staticClass:"invalid-feedback"},[e("span",[t._v(t._s(i[0]))])])])]}}],null,!0)}),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"description"}},[t._v("Description")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.unit.description,expression:"unit.description"}],staticClass:"form-control mb-0",attrs:{type:"text",id:"description",placeholder:"Enter unit description"},domProps:{value:t.unit.description},on:{input:function(e){e.target.composing||t.$set(t.unit,"description",e.target.value)}}})]),e("hr",{staticClass:"solid"}),e("b-button",{staticClass:"float-right",attrs:{variant:"primary"},on:{click:function(e){return i(t.register)}}},[t._v("Register")])],1)])]}}])})],1)},l=[],o=i("8925"),c={name:"ServiceForm",props:{categories:[]},async mounted(){},async created(){},components:{},computed:{...Object(n["c"])({clinicState:"Clinic/clinicState"})},methods:{async register(){try{this.unit.headQuarterId=this.clinicState.id;let{data:t}=await o["a"].create(this.unit);this.$emit("onCreate",t),this.unit=this.defaultUnit,this.makeSuccessToast("Service registered"),this.closeModal("add-unit-modal")}catch(t){console.log(t,"err"),this.makeErrorToast("Service already exists")}},async onFileChange(t){const e=t.target.files[0];e?(this.url=URL.createObjectURL(e),this.unit.logo=await this.getBase64(e)):this.url=null},async getBase64(t){return new Promise((e,i)=>{const a=new FileReader;a.readAsDataURL(t),a.onload=()=>e(a.result),a.onerror=t=>i(t)})},setImage(t){t&&(this.unit.logo=t)}},data(){return{url:"",unit:{name:"",alias:"",logo:"",currency:"",description:""},defaultUnit:{name:"",alias:"",logo:"",currency:"",description:""}}}},d=c,u=(i("2284"),i("2877")),m=Object(u["a"])(d,s,l,!1,null,"984dbe8c",null),v=m.exports,f=(i("e493"),i("21d2"),i("6e61"),i("e990")),p=i("16a4"),g=i("176b"),h={name:"SettingsPage",components:{UnitForm:v,ClinicSettings:g["default"]},data(){return{activePage:"Unit",active:!1,activeClinics:!0,activeServices:!1,activeCategories:!1,units:[],filteredText:"",filteredData:[],notFound:!1,selectedClinic:{},clinicSettingsActive:!1}},async mounted(){await this.init()},firestore(){return{}},computed:{isHeadQuarterClinic(){return this.clinicState.headQuarterId>0},...Object(n["c"])({clinicState:"Clinic/clinicState"})},methods:{...Object(n["b"])({setCategoryState:"Category/setCategoryState",setServiceState:"Service/setServiceState"}),onClick(t){this.$router.push("clinic/"+t)},async init(){await this.getAllClinics(),await this.getAllCategories(),await this.getAllServices()},onCreate(t){this.units.push(t)},async getAllCategories(){let{data:t}=await p["a"].getAll();this.setCategoryState(t)},async getAllServices(){let{data:t}=await f["a"].getAll();this.setServiceState(t)},async getAllClinics(){let{data:t}=await o["a"].getAll();this.units=t},filter(){this.filteredData=[],this.units.map(t=>{t.name.includes(this.filteredText)||t.alias.includes(this.filteredText)?(this.filteredData.push(t),this.notFound=!1):this.notFound=!0})}}},b=h,y=Object(u["a"])(b,a,r,!1,null,"08d360aa",null);e["default"]=y.exports},5516:function(t,e,i){}}]);
//# sourceMappingURL=chunk-6f8f7e39.f1cd4a9a.js.map
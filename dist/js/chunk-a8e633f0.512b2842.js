(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a8e633f0"],{1800:function(e,t,i){"use strict";i("81f1")},"1e7a":function(e,t,i){"use strict";i("a15b")},"1f39":function(e,t,i){"use strict";i("950f")},"30ee":function(e,t,i){},"31a4":function(e,t,i){"use strict";i("5430")},"3f42":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e._self._c;return t("b-container",{attrs:{fluid:""}},[t("b-row",[t("b-col",[t("iq-card",[t("tab-nav",{staticClass:"nav-fill mb-3",attrs:{tabs:"",id:"pills-tab-1"},on:{change:function(t){return e.onClick(t)}}},[t("tab-nav-items",{attrs:{active:!0,id:"pills-clinics-tab-fill",href:"#pills-clinics-fill",ariaControls:"pills-clinics-fill",role:"tab",ariaSelected:!0,title:e.$t("settings.unitTab")}}),t("tab-nav-items",{attrs:{active:!1,id:"pills-services-tab-fill",href:"#pills-services-fill",ariaControls:"pills-services-fill",role:"tab",ariaSelected:!1,title:"Services"}}),t("tab-nav-items",{attrs:{active:!1,id:"pills-categories-tab-fill",href:"#pills-categories-fill",ariaControls:"pills-categories-fill",role:"tab",ariaSelected:!1,title:"Categories"}}),t("tab-nav-items",{attrs:{active:!1,id:"pills-staffs-tab-fill",href:"#pills-staffs-fill",ariaControls:"pills-staffs-fill",role:"tab",ariaSelected:!1,title:"Staffs"}})],1),t("tab-content",{staticClass:"mt-0",attrs:{id:"pills-tabContent-1"}},[t("tab-content-item",{attrs:{active:!0,id:"pills-clinics-fill","aria-labelled-by":"pills-clinics-tab-fill"}},[t("Units")],1),t("tab-content-item",{attrs:{active:!1,id:"pills-services-fill","aria-labelled-by":"pills-services-tab-fill"}},[t("Services",{attrs:{active:e.activePage}})],1),t("tab-content-item",{attrs:{active:!1,id:"pills-categories-fill","aria-labelled-by":"pills-categories-tab-fill"}},[t("Categories",{attrs:{active:e.activePage}})],1),t("tab-content-item",{attrs:{active:!1,id:"pills-staffs-fill","aria-labelled-by":"pills-staffs-tab-fill"}},[t("Staffs",{attrs:{active:e.activePage}})],1)],1)],1)],1)],1)],1)},s=[],r=i("2f62"),l=function(){var e=this,t=e._self._c;return t("b-container",{attrs:{fluid:""}},[t("b-row",[t("b-col",{attrs:{md:"12"}},[t("iq-card",{scopedSlots:e._u([{key:"headerTitle",fn:function(){return[t("h4",{staticClass:"card-title"},[e._v(e._s(e.$t("settings.units.title")))])]},proxy:!0},{key:"headerAction",fn:function(){return[t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filteredText,expression:"filteredText"}],staticClass:"form-control filter-field",attrs:{type:"text",placeholder:"Filter Services"},domProps:{value:e.filteredText},on:{keyup:e.filter,input:function(t){t.target.composing||(e.filteredText=t.target.value)}}})]),t("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"add-unit-modal",expression:"'add-unit-modal'"}],attrs:{variant:"primary"}},[e._v(e._s(e.$t("settings.units.addNew")))])]},proxy:!0},{key:"body",fn:function(){return[t("b-row",[t("b-col",{directives:[{name:"show",rawName:"v-show",value:e.units.length>0,expression:"units.length > 0"}],staticClass:"table-responsive",attrs:{md:"12"}},[t("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function({handleSubmit:i}){return[t("form",{attrs:{novalidate:""}},[t("b-table",{attrs:{id:"dev-table ",items:e.filteredText.length>0?e.filteredData:e.units,fields:e.columns,"foot-clone":""},scopedSlots:e._u([{key:"cell(logo)",fn:function(i){return[i.item.editable?t("b-form-file",{attrs:{type:"input",id:"logo",placeholder:"Enter your unit logo"},on:{change:function(t){return e.onFileChange(t,i.item)}}}):t("img",{staticClass:"img-fluid mr-1",staticStyle:{height:"40px",width:"40px"},attrs:{src:i.item.logo,alt:"img-flaf"}})]}},{key:"cell(name)",fn:function(i){return[i.item.editable?t("input",{directives:[{name:"model",rawName:"v-model",value:i.item.name,expression:"data.item.name"}],staticClass:"form-control filter-field",attrs:{type:"text"},domProps:{value:i.item.name},on:{input:function(t){t.target.composing||e.$set(i.item,"name",t.target.value)}}}):t("span",[e._v(e._s(i.item.name))])]}},{key:"cell(description)",fn:function(i){return[i.item.editable?t("input",{directives:[{name:"model",rawName:"v-model",value:i.item.description,expression:"data.item.description"}],staticClass:"form-control filter-field",attrs:{type:"text"},domProps:{value:i.item.description},on:{input:function(t){t.target.composing||e.$set(i.item,"description",t.target.value)}}}):t("span",[e._v(e._s(i.item.description))])]}},{key:"cell(alias)",fn:function(i){return[i.item.editable?t("input",{directives:[{name:"model",rawName:"v-model",value:i.item.alias,expression:"data.item.alias"}],staticClass:"form-control filter-field",attrs:{type:"text"},domProps:{value:i.item.alias},on:{input:function(t){t.target.composing||e.$set(i.item,"alias",t.target.value)}}}):t("span",[e._v(e._s(i.item.alias))])]}},{key:"cell(currency)",fn:function(i){return[t("ValidationProvider",{attrs:{rules:"required|min:1|max:3",name:"currency"},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[i.item.editable?t("input",{directives:[{name:"model",rawName:"v-model",value:i.item.currency,expression:"data.item.currency"}],class:"form-control filter-field "+(a.length>0?" is-invalid":""),attrs:{type:"text",id:"currency"},domProps:{value:i.item.currency},on:{input:function(t){t.target.composing||e.$set(i.item,"currency",t.target.value)}}}):t("span",[e._v(e._s(i.item.currency))])]}}],null,!0)})]}},{key:"cell(action)",fn:function(a){return[a.item.editable?t("b-button",{attrs:{variant:" iq-bg-success mr-1",size:"sm"},on:{click:function(t){i(e.update(a.item))}}},[t("i",{staticClass:"ri-save-line m-0"})]):t("b-button",{attrs:{variant:" iq-bg-success mr-1",size:"sm"},on:{click:function(t){return e.edit(a.item)}}},[t("i",{staticClass:"ri-ball-pen-fill m-0"})]),a.item.editable?t("b-button",{attrs:{variant:" iq-bg-danger mr-1",size:"sm"},on:{click:function(t){return e.close(a.item)}}},[t("i",{staticClass:"ri-close-line m-0"})]):t("b-button",{attrs:{size:"sm",variant:" iq-bg-danger"},on:{click:function(t){return e.remove(a.item)}}},[t("i",{staticClass:"ri-delete-bin-line m-0"})])]}},{key:"cell(active)",fn:function(i){return[t("b-form-checkbox",{attrs:{name:"check-button",switch:""},on:{input:function(t){return e.toggleStatus(i.item.id)}},model:{value:i.item.active,callback:function(t){e.$set(i.item,"active",t)},expression:"data.item.active"}})]}}],null,!0)})],1)]}}])})],1)],1)]},proxy:!0}])},[t("UnitForm",{on:{onCreate:e.onCreate}})],1)],1)],1)],1)},n=[],o=i("bcae"),c=i("8925"),d=function(){var e=this,t=e._self._c;return t("b-container",{attrs:{fluid:""}},[t("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function({handleSubmit:i}){return[t("b-modal",{attrs:{id:"add-unit-modal",title:"Add Unit","hide-footer":""}},[t("form",{staticClass:"mt-4",attrs:{novalidate:""}},[t("div",{staticClass:"form-group"},[t("div",{attrs:{id:"preview"}},[e.url?t("img",{attrs:{src:e.url}}):e._e()]),t("label",{attrs:{for:"name"}},[e._v("Logo")]),t("b-form-file",{attrs:{type:"input",id:"name",placeholder:"Enter your unit logo"},on:{change:e.onFileChange}})],1),t("ValidationProvider",{attrs:{rules:"required|min:5|max:20",vid:"unitname",name:"Alias"},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"unitname"}},[e._v("Unit Name")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.unit.name,expression:"unit.name"}],class:"form-control mb-0"+(i.length>0?" is-invalid":""),attrs:{type:"text",id:"unitname",placeholder:"Enter unit name"},domProps:{value:e.unit.name},on:{input:function(t){t.target.composing||e.$set(e.unit,"name",t.target.value)}}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(i[0]))])])])]}}],null,!0)}),t("ValidationProvider",{attrs:{vid:"unitalias",name:"unit alias",rules:"required|min:2|max:10"},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"text"}},[e._v("Unit Alias ")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.unit.alias,expression:"unit.alias"}],class:"controllllll form-control mb-0"+(i.length>0?" is-invalid":""),attrs:{type:"text",id:"unitalias",placeholder:"Your Unit Alias"},domProps:{value:e.unit.alias},on:{input:function(t){t.target.composing||e.$set(e.unit,"alias",t.target.value)}}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(i[0]))])])])]}}],null,!0)}),t("ValidationProvider",{attrs:{rules:"required|min:1|max:3",name:"currency"},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"currency"}},[e._v("Currency")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.unit.currency,expression:"unit.currency"}],class:"form-control mb-0"+(i.length>0?" is-invalid":""),attrs:{type:"text",id:"currency",placeholder:"Enter currency (R$, $)"},domProps:{value:e.unit.currency},on:{input:function(t){t.target.composing||e.$set(e.unit,"currency",t.target.value)}}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(i[0]))])])])]}}],null,!0)}),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"description"}},[e._v("Description")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.unit.description,expression:"unit.description"}],staticClass:"form-control mb-0",attrs:{type:"text",id:"description",placeholder:"Enter unit description"},domProps:{value:e.unit.description},on:{input:function(t){t.target.composing||e.$set(e.unit,"description",t.target.value)}}})]),t("hr",{staticClass:"solid"}),t("b-button",{staticClass:"float-right",attrs:{variant:"primary"},on:{click:function(t){return i(e.register)}}},[e._v("Register")])],1)])]}}])})],1)},u=[],m={name:"ServiceForm",props:{categories:[]},async mounted(){},async created(){},components:{},computed:{...Object(r["c"])({clinicState:"Clinic/clinicState"})},methods:{async register(){try{this.unit.headQuarterId=this.clinicState.id;let{data:e}=await c["a"].create(this.unit);this.$emit("onCreate",e),this.unit=this.defaultUnit,this.makeSuccessToast("Service registered"),this.closeModal("add-unit-modal")}catch(e){console.log(e,"err"),this.makeErrorToast("Service already exists")}},async onFileChange(e){const t=e.target.files[0];t?(this.url=URL.createObjectURL(t),this.unit.logo=await this.getBase64(t)):this.url=null},async getBase64(e){return new Promise((t,i)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=()=>t(a.result),a.onerror=e=>i(e)})},setImage(e){e&&(this.unit.logo=e)}},data(){return{url:"",unit:{name:"",alias:"",logo:"",currency:"",description:""},defaultUnit:{name:"",alias:"",logo:"",currency:"",description:""}}}},f=m,p=(i("31a4"),i("2877")),v=Object(p["a"])(f,d,u,!1,null,null,null),g=v.exports,b={name:"UiDataTable",props:{active:String},async mounted(){o["a"].index(),await this.getAllUnits()},async created(){},components:{UnitForm:g},computed:{...Object(r["c"])({userState:"User/userState",clinicalUnitsState:"Clinic/clinicalUnitsState"})},methods:{async onFileChange(e,t){const i=e.target.files[0];i?t.logo=await this.getBase64(i):this.url=null},async getBase64(e){return new Promise((t,i)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=()=>t(a.result),a.onerror=e=>i(e)})},...Object(r["b"])({setClinicalUnitsState:"Clinic/setClinicalUnitsState"}),onCreate(e){this.units.push(this.parseUnit(e)),this.setServiceState(this.cloneObject(this.units))},toggleStatus(e){c["a"].toggleStatus(e),this.setClinicalUnitsState(this.cloneObject(this.units))},filter(){this.filteredData=[],this.units.map(e=>{(e.name.includes(this.filteredText)||e.description.includes(this.filteredText))&&this.filteredData.push(e)})},async getAllUnits(){this.units=this.parseListUnits(this.cloneObject(this.clinicalUnitsState))},edit(e){this.units.map(e=>{e.editable=!1}),e.editable=!0},async update(e){e.editable=!1,await c["a"].update(e),this.setClinicalUnitsState(this.cloneObject(this.units)),this.makeSuccessToast("Changes made")},async remove(e){let t=await c["a"].delete(e.id);if(t){let t=this.filteredData.indexOf(e);this.filteredData.splice(t,1);let i=this.units.indexOf(e);this.units.splice(i,1),this.makeSuccessToast("Unit deleted")}else this.makeWarningToast("This unit is in use")},close(e){e.editable=!1},parseUnit(e){return e.editable=!1,e},parseListUnits(e){return e.map(e=>this.parseUnit(e))}},data(){return{filteredData:[],filteredText:"",unit:{name:"",description:"",category:{},price:""},defaultService:{name:"",description:"",category:"",price:""},columns:[{label:"Logo",key:"logo",class:"text-center"},{label:"Name",key:"name",class:"text-left",sortable:!0},{label:"Description",key:"description",class:"text-left"},{label:this.$t("settings.units.alias"),key:"alias",class:"text-left"},{label:"Currency",key:"currency",class:"text-left"},{label:"Action",key:"action",class:"text-center"},{label:"Active",key:"active",class:"text-center"}],units:[],category:null}}},h=b,y=(i("1e7a"),Object(p["a"])(h,l,n,!1,null,null,null)),S=y.exports,C=function(){var e=this,t=e._self._c;return t("b-container",{attrs:{fluid:""}},[t("b-row",[t("b-col",{attrs:{md:"12"}},[t("iq-card",{scopedSlots:e._u([{key:"headerTitle",fn:function(){return[t("h4",{staticClass:"card-title"},[e._v("Services")])]},proxy:!0},{key:"headerAction",fn:function(){return[t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filteredText,expression:"filteredText"}],staticClass:"form-control filter-field",attrs:{type:"text",placeholder:"Filter Services"},domProps:{value:e.filteredText},on:{keyup:e.filter,input:function(t){t.target.composing||(e.filteredText=t.target.value)}}})]),t("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"add-service-modal",expression:"'add-service-modal'"}],attrs:{variant:"primary"}},[e._v("Add New")])]},proxy:!0},{key:"body",fn:function(){return[t("b-row",[t("b-col",{directives:[{name:"show",rawName:"v-show",value:e.services.length>0,expression:"services.length > 0"}],staticClass:"table-responsive",attrs:{md:"12"}},[t("b-table",{attrs:{id:"dev-table ",items:e.filteredText.length>0?e.filteredData:e.services,fields:e.columns,"foot-clone":""},scopedSlots:e._u([{key:"cell(name)",fn:function(i){return[i.item.editable?t("input",{directives:[{name:"model",rawName:"v-model",value:i.item.name,expression:"data.item.name"}],staticClass:"form-control filter-field",attrs:{type:"text"},domProps:{value:i.item.name},on:{input:function(t){t.target.composing||e.$set(i.item,"name",t.target.value)}}}):t("span",[e._v(e._s(i.item.name))])]}},{key:"cell(description)",fn:function(i){return[i.item.editable?t("input",{directives:[{name:"model",rawName:"v-model",value:i.item.description,expression:"data.item.description"}],staticClass:"form-control filter-field",attrs:{type:"text"},domProps:{value:i.item.description},on:{input:function(t){t.target.composing||e.$set(i.item,"description",t.target.value)}}}):t("span",[e._v(e._s(i.item.description))])]}},{key:"cell(category)",fn:function(i){return[i.item.editable?t("b-select",{attrs:{plain:"",options:e.getCategoriesOptions()},model:{value:i.item.category.name,callback:function(t){e.$set(i.item.category,"name",t)},expression:"data.item.category.name"}}):t("span",{attrs:{value:null,disabled:""}},[e._v(e._s(e.getCategoryName(i.item)))])]}},{key:"cell(price)",fn:function(i){return[i.item.editable?t("input",{directives:[{name:"model",rawName:"v-model",value:i.item.price,expression:"data.item.price"}],staticClass:"form-control filter-field",attrs:{type:"text"},domProps:{value:i.item.price},on:{input:function(t){t.target.composing||e.$set(i.item,"price",t.target.value)}}}):t("span",{attrs:{value:null,disabled:""}},[e._v(e._s(i.item.price))])]}},{key:"cell(action)",fn:function(i){return[i.item.editable?t("b-button",{attrs:{variant:" iq-bg-success mr-1",size:"sm"},on:{click:function(t){return e.update(i.item)}}},[t("i",{staticClass:"ri-save-line m-0"})]):t("b-button",{attrs:{variant:" iq-bg-success mr-1",size:"sm"},on:{click:function(t){return e.edit(i.item)}}},[t("i",{staticClass:"ri-ball-pen-fill m-0"})]),i.item.editable?t("b-button",{attrs:{variant:" iq-bg-danger mr-1",size:"sm"},on:{click:function(t){return e.close(i.item)}}},[t("i",{staticClass:"ri-close-line m-0"})]):t("b-button",{attrs:{size:"sm",variant:" iq-bg-danger"},on:{click:function(t){return e.remove(i.item)}}},[t("i",{staticClass:"ri-delete-bin-line m-0"})])]}},{key:"cell(active)",fn:function(i){return[t("b-form-checkbox",{attrs:{name:"check-button",switch:""},on:{input:function(t){return e.toggleStatus(i.item.id)}},model:{value:i.item.active,callback:function(t){e.$set(i.item,"active",t)},expression:"data.item.active"}})]}}])})],1)],1)]},proxy:!0}])},[t("ServiceForm",{attrs:{categories:e.categories},on:{onCreate:e.onCreate}})],1)],1)],1)],1)},x=[],k=i("dde5"),_=i("0be0"),w={create(e){let t=_["a"].deleteUnusedProps(_["a"].cloneObject(e));return k["a"].post("/services",t)},update(e){let t=_["a"].deleteUnusedProps(_["a"].cloneObject(e));return k["a"].patch("/services/"+e.id,t)},getById(e){return k["a"].get("/services/id/"+e)},deleteById(e){return k["a"].delete("/services/"+e)},getAll(){return k["a"].get("/services/")},toggleStatus(e){return k["a"].patch("/services/toggleStatus/"+e)}},N=function(){var e=this,t=e._self._c;return t("b-container",{attrs:{fluid:""}},[t("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function({handleSubmit:i}){return[t("b-modal",{attrs:{id:"add-service-modal",title:"Add Service","hide-footer":""}},[t("form",{staticClass:"mt-4",attrs:{novalidate:""}},[t("ValidationProvider",{attrs:{vid:"name",name:"Service name",rules:"required"},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"service"}},[e._v("Service")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.service.name,expression:"service.name"}],class:"form-control mb-0"+(i.length>0?" is-invalid":""),attrs:{type:"text",id:"service","aria-describedby":"service",placeholder:"Service name"},domProps:{value:e.service.name},on:{input:function(t){t.target.composing||e.$set(e.service,"name",t.target.value)}}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(i[0]))])])])]}}],null,!0)}),t("ValidationProvider",{attrs:{vid:"service-category",name:"Service category",rules:"required"},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"service-category"}},[e._v("Service category")]),t("b-form-select",{staticClass:"mb-3",attrs:{plain:"",options:e.getCategoriesOptions()},model:{value:e.service.categoryName,callback:function(t){e.$set(e.service,"categoryName",t)},expression:"service.categoryName"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(i[0]))])])],1)]}}],null,!0)}),t("ValidationProvider",{attrs:{vid:"service-price",name:"Service price",rules:"required|amount"},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"service-price"}},[e._v("Service price")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.service.price,expression:"service.price"}],class:"form-control mb-0"+(i.length>0?" is-invalid":""),attrs:{type:"text",id:"service-price","aria-describedby":"service",placeholder:"Service price"},domProps:{value:e.service.price},on:{input:function(t){t.target.composing||e.$set(e.service,"price",t.target.value)}}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(i[0]))])])])]}}],null,!0)}),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"service-description"}},[e._v("Service Description")]),t("b-form-textarea",{attrs:{type:"service",placeholder:"Enter service description",rows:"5"},model:{value:e.service.description,callback:function(t){e.$set(e.service,"description",t)},expression:"service.description"}})],1)],1),t("hr",{staticClass:"solid"}),t("b-button",{staticClass:"float-right",attrs:{variant:"primary"},on:{click:function(t){return i(e.register)}}},[e._v("Register")])],1)]}}])})],1)},O=[],T={name:"ServiceForm",props:{categories:[]},async mounted(){},async created(){},components:{},computed:{...Object(r["c"])({clinicState:"Clinic/clinicState"})},methods:{async register(){try{this.service.clinicId=this.clinicState.id,this.getCategoryId(this.service);let{data:e}=await w.create(this.service);this.$emit("onCreate",this.parseServiceType(e)),this.service=this.defaultService,this.makeSuccessToast("Service registered"),this.closeModal("add-service-modal")}catch{this.makeErrorToast("Service already exists")}},getCategoriesOptions(){let e=this.categories.map(e=>e.name);return e},parseServiceType(e){return e.editable=!1,e.categoryName=e.category.name,e},getCategoryId(e){this.categories.map(t=>{t.name===e.categoryName&&(e.categoryId=t.id)})}},data(){return{service:{name:"",description:"",clinicId:null},defaultService:{name:"",description:""}}}},U=T,A=(i("7123"),Object(p["a"])(U,N,O,!1,null,null,null)),P=A.exports,$={name:"UiDataTable",props:{active:String},watch:{active(e){"Services"===e&&this.init()}},async mounted(){},async created(){},components:{ServiceForm:P},computed:{...Object(r["c"])({clinicState:"Clinic/clinicState",categoryState:"Category/categoryState",serviceState:"Service/serviceState"})},methods:{getCategoryName(e){let t=this.categories.filter(t=>t.id===e.categoryId);return t[0].name},...Object(r["b"])({setServiceState:"Service/setServiceState"}),init(){this.getAllServices(),this.getAllCategories()},toggleStatus(e){w.toggleStatus(e),this.setServiceState(this.cloneObject(this.services))},getCategoriesOptions(){let e=this.categories.map(e=>e.name);return e},filter(){this.filteredData=[],this.services.map(e=>{(e.name.includes(this.filteredText)||e.description.includes(this.filteredText))&&this.filteredData.push(e)})},onCreate(e){this.services.push(this.parseServiceType(e)),this.setServiceState(this.cloneObject(this.services))},async getAllServices(){let e=this.cloneObject(this.serviceState);this.services=this.parseListServicesType(e)},async getAllCategories(){this.categories=this.cloneObject(this.categoryState)},edit(e){this.services.map(e=>{e.editable=!1}),e.editable=!0;let t=this.categoryState.filter(t=>t.id===e.category.id);e.category.name=t[0].name},async update(e){e.editable=!1,this.getCategoryId(e),await w.update(e),this.setServiceState(this.services),this.init(),this.makeSuccessToast("Changes made")},getCategoryId(e){this.categories.map(t=>{t.name===e.category.name&&(e.categoryId=t.id)})},async remove(e){let{data:t}=await w.deleteById(e.id);if(t){let t=this.filteredData.indexOf(e);this.filteredData.splice(t,1);let i=this.services.indexOf(e);return this.services.splice(i,1),this.setServiceState(this.services),void this.makeSuccessToast("Service deleted")}this.makeWarningToast("This service is in use")},close(e){e.editable=!1},parseServiceType(e){return e.editable=!1,console.log(e),e},parseListServicesType(e){return e.map(e=>this.parseServiceType(e))}},data(){return{filteredData:[],filteredText:"",service:{name:"",description:"",category:{},price:""},defaultService:{name:"",description:"",category:"",price:""},columns:[{label:"Name",key:"name",class:"text-left",sortable:!0},{label:"Description",key:"description",class:"text-left"},{label:"Category",key:"category",class:"text-left"},{label:"Price",key:"price",class:"text-left"},{label:"Action",key:"action",class:"text-center"},{label:"Active",key:"active",class:"text-center"}],categories:[],category:null,services:[]}}},j=$,I=(i("1f39"),Object(p["a"])(j,C,x,!1,null,null,null)),D=I.exports,q=function(){var e=this,t=e._self._c;return t("b-container",{attrs:{fluid:""}},[t("b-row",[t("b-col",{attrs:{md:"12"}},[t("iq-card",{scopedSlots:e._u([{key:"headerTitle",fn:function(){return[t("h4",{staticClass:"card-title"},[e._v("Staffs")])]},proxy:!0},{key:"headerAction",fn:function(){return[t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filteredText,expression:"filteredText"}],staticClass:"form-control filter-field",attrs:{type:"text",placeholder:"Filter Staffs"},domProps:{value:e.filteredText},on:{keyup:e.filter,input:function(t){t.target.composing||(e.filteredText=t.target.value)}}})]),t("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"add-staff-modal",expression:"'add-staff-modal'"}],attrs:{variant:"primary"}},[e._v("Add New")])]},proxy:!0},{key:"body",fn:function(){return[t("b-row",[t("b-col",{directives:[{name:"show",rawName:"v-show",value:e.staffs.length>0,expression:"staffs.length > 0"}],staticClass:"table-responsive",attrs:{md:"12"}},[t("b-table",{attrs:{id:"dev-table ",items:e.filteredText.length>0?e.filteredData:e.staffs,fields:e.columns,"foot-clone":""},scopedSlots:e._u([{key:"cell(fullName)",fn:function(i){return[i.item.editable?t("input",{directives:[{name:"model",rawName:"v-model",value:i.item.fullName,expression:"data.item.fullName"}],staticClass:"form-control filter-field",attrs:{type:"text"},domProps:{value:i.item.fullName},on:{input:function(t){t.target.composing||e.$set(i.item,"fullName",t.target.value)}}}):t("span",[e._v(e._s(i.item.fullName))])]}},{key:"cell(email)",fn:function(i){return[t("span",[e._v(e._s(i.item.email))])]}},{key:"cell(createdAt)",fn:function(i){return[t("span",[e._v(e._s(i.item.createdAt))])]}},{key:"cell(role)",fn:function(i){return[i.item.editable&&"admin"!==i.item.role?t("b-select",{attrs:{plain:"",options:e.roleOptions},model:{value:i.item.role,callback:function(t){e.$set(i.item,"role",t)},expression:"data.item.role"}}):t("span",[e._v(e._s(i.item.role))])]}},{key:"cell(headQuarterName)",fn:function(i){return[i.item.editable?t("b-select",{attrs:{plain:"",options:e.getClinicOptions()},model:{value:i.item.headQuarterName,callback:function(t){e.$set(i.item,"headQuarterName",t)},expression:"data.item.headQuarterName"}}):t("span",[e._v(e._s(i.item.headQuarterName))])]}},{key:"cell(performService)",fn:function(i){return["receptionist"!==i.item.role&&"customer"!==i.item.role?t("b-form-checkbox",{attrs:{name:"check-button",switch:""},on:{input:function(t){return e.togglePerformServiceStatus(i.item.id)}},model:{value:i.item.performService,callback:function(t){e.$set(i.item,"performService",t)},expression:"data.item.performService"}}):e._e()]}},{key:"cell(active)",fn:function(i){return[t("b-form-checkbox",{attrs:{name:"check-button",switch:""},on:{input:function(t){return e.toggleActiveStatus(i.item.id)}},model:{value:i.item.active,callback:function(t){e.$set(i.item,"active",t)},expression:"data.item.active"}})]}},{key:"cell(action)",fn:function(i){return[i.item.editable?t("b-button",{attrs:{variant:" iq-bg-success mr-1",size:"sm"},on:{click:function(t){return e.update(i.item)}}},[t("i",{staticClass:"ri-save-line m-0"})]):t("b-button",{attrs:{variant:" iq-bg-success mr-1",size:"sm"},on:{click:function(t){return e.edit(i.item)}}},[t("i",{staticClass:"ri-ball-pen-fill m-0"})]),i.item.editable||"admin"===i.item.role?i.item.editable?t("b-button",{attrs:{variant:" iq-bg-danger mr-1",size:"sm"},on:{click:function(t){return e.close(i.item)}}},[t("i",{staticClass:"ri-close-line m-0"})]):e._e():t("b-button",{attrs:{size:"sm",variant:" iq-bg-danger"},on:{click:function(t){return e.remove(i.item)}}},[t("i",{staticClass:"ri-delete-bin-line m-0"})])]}}])})],1)],1)]},proxy:!0}])},[t("StaffForm",{on:{onCreate:e.onCreate}})],1)],1)],1)],1)},F=[],R=i("1482b"),E=i("93d6"),V=function(){var e=this,t=e._self._c;return t("b-container",{attrs:{fluid:""}},[t("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function({handleSubmit:i}){return[t("b-modal",{attrs:{id:"add-staff-modal",title:"Add Staff","hide-footer":""}},[t("form",{staticClass:"mt-4",attrs:{novalidate:""}},[t("ValidationProvider",{attrs:{vid:"name",name:"Full Name",rules:"required|fullName"},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"name"}},[e._v("Name")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.staff.fullName,expression:"staff.fullName"}],class:"form-control mb-0"+(i.length>0?" is-invalid":""),attrs:{type:"text",id:"name","aria-describedby":"name",placeholder:"Staff Full Name"},domProps:{value:e.staff.fullName},on:{input:function(t){t.target.composing||e.$set(e.staff,"fullName",t.target.value)}}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(i[0]))])])])]}}],null,!0)}),t("ValidationProvider",{attrs:{vid:"email",name:"E-mail",rules:"required|email|userEmailAvailable"},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"emailInput"}},[e._v("Email address")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.staff.email,expression:"staff.email"}],class:"form-control mb-0"+(i.length>0?" is-invalid":""),attrs:{type:"email",id:"emailInput","aria-describedby":"emailHelp",placeholder:"Enter email",required:""},domProps:{value:e.staff.email},on:{input:function(t){t.target.composing||e.$set(e.staff,"email",t.target.value)}}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(i[0]))])])])]}}],null,!0)}),t("ValidationProvider",{attrs:{rules:"required|caracters",name:"basepassword"},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"text"}},[e._v("Password")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.basepassword,expression:"basepassword"}],class:"form-control mb-0"+(i.length>0?" is-invalid":""),attrs:{type:"password",id:"email",placeholder:"Enter password"},domProps:{value:e.basepassword},on:{input:function(t){t.target.composing||(e.basepassword=t.target.value)}}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(i[0]))])])])]}}],null,!0)}),t("ValidationProvider",{attrs:{name:"confirm",rules:"required|password:@basepassword"},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"text"}},[e._v("Confirm Password")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.staff.password,expression:"staff.password"}],class:"form-control mb-0"+(i.length>0?" is-invalid":""),attrs:{type:"password",id:"password",placeholder:"Enter password","data-vv-as":"basepassword"},domProps:{value:e.staff.password},on:{input:function(t){t.target.composing||e.$set(e.staff,"password",t.target.value)}}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(i[0]))])])])]}}],null,!0)}),t("ValidationProvider",{attrs:{name:"role",rules:"required|role"},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"text"}},[e._v("Role")]),t("b-form-select",{staticClass:"mb-3",attrs:{plain:"",options:e.roleOptions},scopedSlots:e._u([{key:"first",fn:function(){return[t("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v("Select staff role")])]},proxy:!0}],null,!0),model:{value:e.staff.role,callback:function(t){e.$set(e.staff,"role",t)},expression:"staff.role"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(i[0]))])])],1)]}}],null,!0)}),t("ValidationProvider",{attrs:{name:"unit",rules:"required"},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"text"}},[e._v("Staff Unit")]),t("b-form-select",{staticClass:"mb-3",attrs:{plain:"",options:e.getClinicOptions()},scopedSlots:e._u([{key:"first",fn:function(){return[t("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v("Select staff unit")])]},proxy:!0}],null,!0),model:{value:e.clinicalUnitsSelected,callback:function(t){e.clinicalUnitsSelected=t},expression:"clinicalUnitsSelected"}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(i[0]))])])],1)]}}],null,!0)}),e.isDoctor()?t("div",[t("b-form-checkbox",{attrs:{id:"perform-service",name:"check-button",switch:""},model:{value:e.performService,callback:function(t){e.performService=t},expression:"performService"}},[t("a",[e._v("Performs Service?")])])],1):e._e()],1),t("hr",{staticClass:"solid"}),t("b-button",{staticClass:"float-right",attrs:{variant:"primary"},on:{click:function(t){return i(e.register)}}},[e._v("Register")])],1)]}}])})],1)},z=[],L={name:"StaffForm",props:{},watch:{performService(e){console.log(e)}},async mounted(){this.setAppRoles()},async created(){},components:{},computed:{...Object(r["c"])({clinicState:"Clinic/clinicState",clinicalUnitsState:"Clinic/clinicalUnitsState",userState:"User/userState"})},methods:{isDoctor(){return this.staff.role===R["a"].ADMIN||this.staff.role===R["a"].DOCTOR||this.staff.role===R["a"].SUPER},getClinicOptions(){let e=this.clinicalUnitsState.map(e=>e.name);return e.push(this.clinicState.name),e},getRandomColor(){const e="#"+((1<<24)*Math.random()|0).toString(16);return e},async register(){try{this.parseFullName(this.staff),delete this.staff.fullName,this.staff.performService=this.performService,this.staff.clinicId=this.clinicState.id,this.setStaffClinicalUnitId(this.staff);let{data:e}=await E["a"].createUser(this.staff);this.$emit("onCreate",e),this.staff=this.cloneObject(this.defaultStaff),this.performService=!0,this.basepassword="",this.makeSuccessToast("Staff registered"),this.closeModal("add-staff-modal")}catch(e){console.log("error: ",e),this.makeErrorToast("Staff already exists")}},setAppRoles(){this.userState.role.includes("super")?this.roleOptions=R["b"]:this.roleOptions=R["b"].slice(1)},parseFullName(e){if(e.fullName){let t=e.fullName.split(" ");e.firstName=t[0],t.shift(),e.lastName=t.join(" ")}else e.fullName=e.firstName+" "+e.lastName},setStaffClinicalUnitId(e){let t=this.clinicalUnitsState.filter(e=>e.name===this.clinicalUnitsSelected);t.length>0?(e.clinicId=t[0].id,e.headQuarterId=this.clinicState.id):(e.clinicId=this.clinicState.id,e.headQuarterId=this.clinicState.id)}},data(){return{performService:!0,clinicalUnitsSelected:null,roleOptions:null,clinicOptions:[],basepassword:"",staff:{fullName:"",firstName:"",lastName:"",email:"",password:"",role:"",clinicId:null,isFirstUser:!1},defaultStaff:{fullName:"",firstName:"",lastName:"",email:"",password:"",role:"",clinicId:null,isFirstUser:!1}}}},Q=L,B=(i("491d"),Object(p["a"])(Q,V,z,!1,null,null,null)),M=B.exports,H={name:"UiDataTable",props:{active:String},watch:{active(e){"Staffs"===e&&this.init()}},async mounted(){o["a"].index(),this.setAppRoles(),await this.init()},async created(){},components:{StaffForm:M},computed:{...Object(r["c"])({clinicState:"Clinic/clinicState",clinicalUnitsState:"Clinic/clinicalUnitsState",userState:"User/userState"})},methods:{...Object(r["b"])({setUserState:"User/setUserState"}),async init(){await this.getAllStaffs()},getClinicOptions(){let e=this.clinicalUnitsState.filter(e=>e.active),t=e.map(e=>e.name);return t.push(this.clinicState.name),t},toggleActiveStatus(e){E["a"].toggleActiveStatus(e)},togglePerformServiceStatus(e){E["a"].togglePerformServiceStatus(e)},filter(){this.filteredData=[],this.staffs.map(e=>{(e.fullName.includes(this.filteredText)||e.email.includes(this.filteredText))&&this.filteredData.push(e)})},onCreate(e){this.staffs.push(this.parseStaff(e))},setAppRoles(){this.userState.role.includes("super")?this.roleOptions=R["b"]:this.roleOptions=R["b"].slice(1)},closeModal(e){this.$root.$emit("bv::hide::modal",e)},async getAllStaffs(){let{data:e}=await E["a"].getAllByHeadQuarterId(this.clinicState.id);this.staffs=this.parseListStaffs(e)},edit(e){this.staffs.map(e=>{e.editable=!1}),e.editable=!0},setStaffClinicalUnitId(e){let t=this.cloneObject(this.clinicalUnitsState);t.push(this.clinicState),t.map(t=>{t.name===e.headQuarterName&&(e.clinicId=t.id,e.headQuarterId=this.clinicState.id)})},async update(e){e.editable=!1,this.parseFullName(e),this.setStaffClinicalUnitId(e),console.log(e),await E["a"].update(e),this.makeSuccessToast("Staff updated")},remove(e){let t=this.filteredData.indexOf(e);this.filteredData.splice(t,1);let i=this.staffs.indexOf(e);this.staffs.splice(i,1),E["a"].deleteById(e.id),this.makeSuccessToast("Staff deleted")},close(e){e.editable=!1},parseFullName(e){if(e.fullName){let t=e.fullName.split(" ");e.firstName=t[0],t.shift(),e.lastName=t.join(" ")}else e.fullName=e.firstName+" "+e.lastName},parseStaff(e){e.fullName=e.firstName+" "+e.lastName,e.editable=!1;let t=this.cloneObject(this.clinicalUnitsState);t.push(this.clinicState);let i=t.filter(t=>t.id===e.clinicId);return e.headQuarterName=i[0].name,e},parseListStaffs(e){return e.map(e=>this.parseStaff(e))}},data(){return{clinicalUnitsSelected:null,filteredData:[],filteredText:"",roleOptions:null,basepassword:"",staff:{fullName:"",firstName:"",lastName:"",email:"",password:"",role:"",clinicId:null,isFirstUser:!1},defaultStaff:{fullName:"",firstName:"",lastName:"",email:"",password:"",role:"",clinicId:null,isFirstUser:!1},columns:[{label:"Name",key:"fullName",class:"text-left",sortable:!0},{label:"Email",key:"email",class:"text-left"},{label:"CreatedAt",key:"createdAt",class:"text-left"},{label:"Role",key:"role",class:"text-left"},{label:"Clinial Unit",key:"headQuarterName",class:"text-center"},{label:"Performs Service",key:"performService",class:"text-center"},{label:"Active",key:"active",class:"text-center"},{label:"Action",key:"action",class:"text-center"}],staffs:[]}}},W=H,J=(i("7c48"),Object(p["a"])(W,q,F,!1,null,null,null)),Y=J.exports,G=function(){var e=this,t=e._self._c;return t("b-container",{attrs:{fluid:""}},[t("b-row",[t("b-col",{attrs:{md:"12"}},[t("iq-card",{scopedSlots:e._u([{key:"headerTitle",fn:function(){return[t("h4",{staticClass:"card-title"},[e._v("Categories")])]},proxy:!0},{key:"headerAction",fn:function(){return[t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filteredText,expression:"filteredText"}],staticClass:"form-control filter-field",attrs:{type:"text",placeholder:"Filter Categories"},domProps:{value:e.filteredText},on:{keyup:e.filter,input:function(t){t.target.composing||(e.filteredText=t.target.value)}}})]),t("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"add-category-modal",expression:"'add-category-modal'"}],attrs:{variant:"primary"}},[e._v("Add New")])]},proxy:!0},{key:"body",fn:function(){return[t("b-row",[t("b-col",{directives:[{name:"show",rawName:"v-show",value:e.categories.length>0,expression:"categories.length > 0"}],staticClass:"table-responsive",attrs:{md:"12"}},[t("b-table",{attrs:{id:"dev-table ",items:e.filteredText.length>0?e.filteredData:e.categories,fields:e.columns,"foot-clone":""},scopedSlots:e._u([{key:"cell(name)",fn:function(i){return[i.item.editable?t("input",{directives:[{name:"model",rawName:"v-model",value:i.item.name,expression:"data.item.name"}],staticClass:"form-control filter-field",attrs:{type:"text"},domProps:{value:i.item.name},on:{input:function(t){t.target.composing||e.$set(i.item,"name",t.target.value)}}}):t("span",[e._v(e._s(i.item.name))])]}},{key:"cell(description)",fn:function(i){return[i.item.editable?t("input",{directives:[{name:"model",rawName:"v-model",value:i.item.description,expression:"data.item.description"}],staticClass:"form-control filter-field",attrs:{type:"text"},domProps:{value:i.item.description},on:{input:function(t){t.target.composing||e.$set(i.item,"description",t.target.value)}}}):t("span",[e._v(e._s(i.item.description))])]}},{key:"cell(action)",fn:function(i){return[i.item.editable?t("b-button",{attrs:{variant:" iq-bg-success mr-1",size:"sm"},on:{click:function(t){return e.update(i.item)}}},[t("i",{staticClass:"ri-save-line m-0"})]):t("b-button",{attrs:{variant:" iq-bg-success mr-1",size:"sm"},on:{click:function(t){return e.edit(i.item)}}},[t("i",{staticClass:"ri-ball-pen-fill m-0"})]),i.item.editable?t("b-button",{attrs:{variant:" iq-bg-danger mr-1",size:"sm"},on:{click:function(t){return e.close(i.item)}}},[t("i",{staticClass:"ri-close-line m-0"})]):t("b-button",{attrs:{size:"sm",variant:" iq-bg-danger"},on:{click:function(t){return e.remove(i.item)}}},[t("i",{staticClass:"ri-delete-bin-line m-0"})])]}},{key:"cell(active)",fn:function(i){return[t("b-form-checkbox",{attrs:{name:"check-button",switch:""},on:{input:function(t){return e.toggleStatus(i.item.id)}},model:{value:i.item.active,callback:function(t){e.$set(i.item,"active",t)},expression:"data.item.active"}})]}}])})],1)],1)]},proxy:!0}])},[t("CategoryForm",{on:{onCreate:e.onCreate}})],1)],1)],1)],1)},K=[],X={create(e){return k["a"].post("/categories",e)},update(e){let t=_["a"].deleteUnusedProps(_["a"].cloneObject(e));return k["a"].patch("/categories/"+e.id,t)},getById(e){return k["a"].get("/categories/id/"+e)},deleteById(e){return k["a"].delete("/categories/"+e)},getAll(){return k["a"].get("/categories/")},toggleStatus(e){return k["a"].patch("/categories/toggleStatus/"+e)}},Z=function(){var e=this,t=e._self._c;return t("b-container",{attrs:{fluid:""}},[t("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function({handleSubmit:i}){return[t("b-modal",{attrs:{id:"add-category-modal",title:"Add Category","hide-footer":""}},[t("form",{staticClass:"mt-4",attrs:{novalidate:""}},[t("ValidationProvider",{attrs:{vid:"name",name:"Category name",rules:"required"},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"category"}},[e._v("Category")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.category.name,expression:"category.name"}],class:"form-control mb-0"+(i.length>0?" is-invalid":""),attrs:{type:"text",id:"category","aria-describedby":"category",placeholder:"Category name"},domProps:{value:e.category.name},on:{input:function(t){t.target.composing||e.$set(e.category,"name",t.target.value)}}}),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(i[0]))])])])]}}],null,!0)}),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"category-description"}},[e._v("Category Description")]),t("b-form-textarea",{attrs:{type:"category",place:"",holder:"Enter category description",rows:"5"},model:{value:e.category.description,callback:function(t){e.$set(e.category,"description",t)},expression:"category.description"}})],1)],1),t("hr",{staticClass:"solid"}),t("b-button",{staticClass:"float-right",attrs:{variant:"primary"},on:{click:function(t){return i(e.register)}}},[e._v("Register")])],1)]}}])})],1)},ee=[],te={name:"CategoryForm",props:{},async mounted(){},async created(){},components:{},computed:{...Object(r["c"])({clinicState:"Clinic/clinicState"})},methods:{async register(){try{this.category.clinicId=this.clinicState.id;let{data:e}=await X.create(this.category);this.closeModal("add-category-modal"),this.$emit("onCreate",e),this.category=this.defaultCategory,this.makeSuccessToast("Category registered")}catch{this.makeErrorToast("Category already exists")}}},data(){return{category:{name:"",description:"",clinicId:null},defaultCategory:{name:"",description:""},columns:[{label:"Name",key:"name",class:"text-left",sortable:!0},{label:"Description",key:"description",class:"text-left"},{label:"Action",key:"action",class:"text-center"},{label:"Active",key:"active",class:"text-center"}]}}},ie=te,ae=(i("1800"),Object(p["a"])(ie,Z,ee,!1,null,null,null)),se=ae.exports,re={name:"Categories",props:{active:String},watch:{active(e){"Categories"===e&&this.init()}},async mounted(){},async created(){},components:{CategoryForm:se},computed:{...Object(r["c"])({clinicState:"Clinic/clinicState",userState:"User/userState",categoryState:"Category/categoryState",serviceState:"Service/serviceState"})},methods:{...Object(r["b"])({setCategoryState:"Category/setCategoryState"}),init(){this.getAllCategories()},toggleStatus(e){X.toggleStatus(e)},filter(){this.filteredData=[],this.categories.map(e=>{(e.name.includes(this.filteredText)||e.description.includes(this.filteredText))&&this.filteredData.push(e)})},onCreate(e){this.categories.push(this.parseCategory(e)),this.setCategoryState(this.cloneObject(this.categories))},getAllCategories(){let e=this.cloneObject(this.categoryState);this.categories=this.parseListCategories(e),console.log(this.categories,"catego")},edit(e){this.categories.map(e=>{e.editable=!1}),e.editable=!0},async update(e){e.editable=!1,console.log(e),await X.update(e),this.setCategoryState(this.cloneObject(this.categories)),this.getAllCategories(),this.makeSuccessToast("Changes made")},async remove(e){let{data:t}=await X.deleteById(e.id);if(t){let t=this.filteredData.indexOf(e);this.filteredData.splice(t,1);let i=this.categories.indexOf(e);return this.categories.splice(i,1),this.setCategoryState(this.cloneObject(this.categories)),void this.makeSuccessToast("Category deleted")}this.makeWarningToast("This category is in use")},close(e){e.editable=!1},parseCategory(e){return e.editable=!1,e},parseListCategories(e){if(e)return e.map(e=>this.parseCategory(e))}},data(){return{filteredData:[],filteredText:"",category:{name:"",description:"",clinicId:null},defaultCategory:{name:"",description:""},columns:[{label:"Name",key:"name",class:"text-left",sortable:!0},{label:"Description",key:"description",class:"text-left"},{label:"Action",key:"action",class:"text-center"},{label:"Active",key:"active",class:"text-center"}],categories:[]}}},le=re,ne=(i("a9e7"),Object(p["a"])(le,G,K,!1,null,null,null)),oe=ne.exports,ce={name:"SettingsPage",data(){return{activePage:"Unit",active:!1,activeClinics:!0,activeServices:!1,activeCategories:!1}},async mounted(){await this.init()},firestore(){return{}},components:{Units:S,Services:D,Staffs:Y,Categories:oe},beforeMount(){},methods:{...Object(r["b"])({setCategoryState:"Category/setCategoryState",setServiceState:"Service/setServiceState"}),onClick(e){this.activePage=e.target.innerHTML},async init(){await this.getAllCategories(),await this.getAllServices()},async getAllCategories(){let{data:e}=await X.getAll();this.setCategoryState(e)},async getAllServices(){let{data:e}=await w.getAll();this.setServiceState(e)}},computed:{}},de=ce,ue=(i("4a70"),Object(p["a"])(de,a,s,!1,null,null,null));t["default"]=ue.exports},"491d":function(e,t,i){"use strict";i("bbc5")},"4a70":function(e,t,i){"use strict";i("a650")},5430:function(e,t,i){},7123:function(e,t,i){"use strict";i("30ee")},"7c48":function(e,t,i){"use strict";i("d1b0")},"7de5":function(e,t,i){},"81f1":function(e,t,i){},"950f":function(e,t,i){},a15b:function(e,t,i){},a650:function(e,t,i){},a9e7:function(e,t,i){"use strict";i("7de5")},bbc5:function(e,t,i){},d1b0:function(e,t,i){}}]);
//# sourceMappingURL=chunk-a8e633f0.512b2842.js.map